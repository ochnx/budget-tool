"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[677],{49108:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},37805:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},81433:function(e,t,a){a.d(t,{v:function(){return i}});var s=a(28777),n=a(78720),r=a(23356),l=a(22983),d=a(12627),i=(0,s.z)({chartName:"BarChart",GraphicalChild:n.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:r.K},{axisType:"yAxis",AxisComp:l.B}],formatAxisMap:d.t9})},44677:function(e,t,a){a.r(t),a.d(t,{default:function(){return z}});var s=a(3827),n=a(64090),r=a(14958),l=a(18695),d=a(49108),i=a(37805),o=a(29733),c=a(10775),m=a(17252),x=a(87461);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,x.Z)("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]),u=(0,x.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);var g=a(26587),p=a(24897),b=a(98308),f=a(74994),y=a(10166),k=a(94866),j=a(81433),N=a(23356),v=a(22983),w=a(78720);function z(){let[e,t]=(0,n.useState)([]),[a,x]=(0,n.useState)([]),[z,M]=(0,n.useState)(()=>{let e=new Date;return{month:e.getMonth(),year:e.getFullYear()}}),[C,D]=(0,n.useState)(!0),[A,B]=(0,n.useState)(!1);async function T(){D(!0);let e=new Date(z.year,z.month,1),a=new Date(z.year,z.month+1,0),[s,n]=await Promise.all([r.O.from("transactions").select("*, category:categories(*)").gte("date",e.toISOString().split("T")[0]).lte("date",a.toISOString().split("T")[0]).order("date",{ascending:!1}),r.O.from("categories").select("*").order("sort_order")]);s.data&&t(s.data),n.data&&x(n.data),D(!1)}(0,n.useEffect)(()=>{B(!0)},[]),(0,n.useEffect)(()=>{T()},[z]);let G=(0,n.useMemo)(()=>{let t=e.filter(e=>e.is_income).reduce((e,t)=>e+Number(t.amount),0),a=Math.abs(e.filter(e=>!e.is_income).reduce((e,t)=>e+Number(t.amount),0)),s=t-a,n=new Date,r=new Date(z.year,z.month+1,0).getDate(),l=n.getMonth()===z.month&&n.getFullYear()===z.year?Math.max(1,r-n.getDate()+1):new Date(z.year,z.month,1)>n?r:0,d=new Map;e.filter(e=>!e.is_income).forEach(e=>{let t=e.category,a=(null==t?void 0:t.id)||"uncategorized",s=d.get(a),n=Math.abs(Number(e.amount));s?s.total+=n:d.set(a,{name:(null==t?void 0:t.name)||"Unkategorisiert",icon:(null==t?void 0:t.icon)||"❓",color:(null==t?void 0:t.color)||"#6B7280",total:n})});let i=Array.from(d.values()).sort((e,t)=>t.total-e.total);return{income:t,expenses:a,remaining:s,dailyBudget:l>0?s/l:0,daysLeft:l,topCategory:i.length>0?i[0]:null,categoryBreakdown:i}},[e,z]),S=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=G.expenses>0?(a[0].value/G.expenses*100).toFixed(1):"0";return(0,s.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-dark-100",children:[a[0].payload.icon," ",a[0].payload.name||a[0].name]}),(0,s.jsx)("p",{className:"text-sm text-emerald-400 font-bold",children:(0,l.xG)(a[0].value)}),(0,s.jsxs)("p",{className:"text-xs text-dark-400",children:[e,"% der Ausgaben"]})]})}return null};return C?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-dark-50",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:function(){M(e=>0===e.month?{month:11,year:e.year-1}:{...e,month:e.month-1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,s.jsx)(d.Z,{size:20})}),(0,s.jsxs)("span",{className:"text-lg font-semibold min-w-[180px] text-center",children:[(0,l.ZY)(z.month)," ",z.year]}),(0,s.jsx)("button",{onClick:function(){M(e=>11===e.month?{month:0,year:e.year+1}:{...e,month:e.month+1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,s.jsx)(i.Z,{size:20})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-emerald-500/15",children:(0,s.jsx)(o.Z,{size:20,className:"text-emerald-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Einnahmen"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:(0,l.xG)(G.income)})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-red-500/15",children:(0,s.jsx)(c.Z,{size:20,className:"text-red-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Ausgaben"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-400",children:(0,l.xG)(G.expenses)})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-cyan-500/15",children:(0,s.jsx)(m.Z,{size:20,className:"text-cyan-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Noch \xfcbrig diesen Monat"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(G.remaining>=0?"text-emerald-400":"text-red-400"),children:(0,l.xG)(G.remaining)})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-amber-500/15",children:(0,s.jsx)(h,{size:20,className:"text-amber-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:G.daysLeft>0?"Tagesbudget (".concat(G.daysLeft," Tage \xfcbrig)"):"Tagesbudget"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(G.dailyBudget>=0?"text-amber-400":"text-red-400"),children:G.daysLeft>0?"".concat((0,l.xG)(G.dailyBudget),"/Tag"):"–"})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-purple-500/15",children:(0,s.jsx)(u,{size:20,className:"text-purple-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Top-Ausgabe"})]}),G.topCategory?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-400",children:(0,l.xG)(G.topCategory.total)}),(0,s.jsxs)("p",{className:"text-xs text-dark-400 mt-1",children:[G.topCategory.icon," ",G.topCategory.name]})]}):(0,s.jsx)("p",{className:"text-2xl font-bold text-dark-500",children:"–"})]})]}),A&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben nach Kategorie"}),0===G.categoryBreakdown.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-dark-400",children:"Keine Ausgaben diesen Monat"}):(0,s.jsx)("div",{style:{width:"100%",height:350},children:(0,s.jsx)(g.h,{width:"100%",height:"100%",children:(0,s.jsxs)(p.u,{children:[(0,s.jsx)(b.b,{data:G.categoryBreakdown,cx:"50%",cy:"50%",innerRadius:60,outerRadius:110,paddingAngle:2,dataKey:"total",nameKey:"name",isAnimationActive:!0,children:G.categoryBreakdown.map((e,t)=>(0,s.jsx)(f.b,{fill:e.color,stroke:"transparent"},"cell-".concat(t)))}),(0,s.jsx)(y.u,{content:(0,s.jsx)(S,{})}),(0,s.jsx)(k.D,{formatter:e=>(0,s.jsx)("span",{className:"text-dark-300 text-sm",children:e})})]})})})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Alle Ausgaben-Kategorien",(0,s.jsxs)("span",{className:"text-sm text-dark-400 font-normal ml-2",children:["(",G.categoryBreakdown.length," Kategorien)"]})]}),0===G.categoryBreakdown.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-dark-400",children:"Keine Ausgaben diesen Monat"}):(0,s.jsx)("div",{style:{width:"100%",height:Math.max(300,44*G.categoryBreakdown.length)},children:(0,s.jsx)(g.h,{width:"100%",height:"100%",children:(0,s.jsxs)(j.v,{data:G.categoryBreakdown,layout:"vertical",margin:{top:0,right:60,bottom:0,left:10},children:[(0,s.jsx)(N.K,{type:"number",hide:!0}),(0,s.jsx)(v.B,{type:"category",dataKey:"name",width:130,tick:{fill:"#94a3b8",fontSize:13},axisLine:!1,tickLine:!1}),(0,s.jsx)(y.u,{content:(0,s.jsx)(S,{}),cursor:{fill:"rgba(255,255,255,0.05)"}}),(0,s.jsx)(w.$,{dataKey:"total",radius:[0,8,8,0],barSize:28,label:e=>{let{value:t,x:a,y:n,width:r,height:d}=e;return(0,s.jsx)("text",{x:a+r+8,y:n+d/2,fill:"#94a3b8",fontSize:12,dominantBaseline:"middle",children:(0,l.xG)(t)})},children:G.categoryBreakdown.map((e,t)=>(0,s.jsx)(f.b,{fill:e.color},"bar-".concat(t)))})]})})})]})]}),G.categoryBreakdown.length>0&&(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben-Details"}),(0,s.jsxs)("div",{className:"space-y-2",children:[G.categoryBreakdown.map((e,t)=>{let a=G.expenses>0?e.total/G.expenses*100:0;return(0,s.jsxs)("div",{className:"flex items-center gap-3 py-3 px-4 rounded-xl hover:bg-dark-700/50",children:[(0,s.jsx)("span",{className:"text-xl w-8 text-center",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-dark-100",children:e.name}),(0,s.jsx)("span",{className:"text-sm font-bold text-red-400",children:(0,l.xG)(e.total)})]}),(0,s.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(a,"%"),backgroundColor:e.color}})})]}),(0,s.jsxs)("span",{className:"text-xs text-dark-400 w-12 text-right",children:[a.toFixed(1),"%"]})]},t)}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 mt-2 border-t border-dark-700/50 px-4",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-dark-200",children:"Gesamt"}),(0,s.jsx)("span",{className:"text-sm font-bold text-red-400",children:(0,l.xG)(G.expenses)})]})]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Letzte Transaktionen"}),0===e.length?(0,s.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Noch keine Transaktionen. Importiere deinen Kontoauszug! \uD83D\uDCC4"}):(0,s.jsx)("div",{className:"space-y-2",children:e.slice(0,10).map(e=>{let t=e.category;return(0,s.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl hover:bg-dark-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:(null==t?void 0:t.icon)||"\uD83D\uDCE6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-dark-100 truncate max-w-[200px] sm:max-w-[300px]",children:e.recipient||e.description||"Unbekannt"}),(0,s.jsxs)("p",{className:"text-xs text-dark-400",children:[new Date(e.date).toLocaleDateString("de-DE")," \xb7 ",(null==t?void 0:t.name)||"Unkategorisiert"]})]})]}),(0,s.jsxs)("span",{className:"text-sm font-bold ".concat(e.is_income?"text-emerald-400":"text-red-400"),children:[e.is_income?"+":"-",(0,l.xG)(Number(e.amount))]})]},e.id)})})]})]})}},18695:function(e,t,a){a.d(t,{Wd:function(){return n},ZY:function(){return l},xG:function(){return r}});let s=[{categoryName:"Miete",keywords:["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau"]},{categoryName:"Lebensmittel",keywords:["rewe","edeka","aldi","lidl","netto","penny","kaufland","dm-drogerie","dm ","rossmann","supermarkt","lebensmittel","norma","real"]},{categoryName:"Klamotten",keywords:["zara","h&m","zalando","about you","aboutyou","asos","nike","adidas","cos ","uniqlo","pull&bear","bershka","massimo dutti","mango","snipes","foot locker","footlocker","mr porter","end clothing","ssense","farfetch","kickz","hhv"]},{categoryName:"Transport",keywords:["db ","deutsche bahn","bahn","deutschlandticket","mvv","uber","bolt","freenow","free now","tier","lime","voi","tankstelle","aral","shell","esso","jet tanken","adac","flixbus","taxi"]},{categoryName:"Restaurants",keywords:["restaurant","lieferando","uber eats","ubereats","wolt","doordash","mcdonalds","mcdonald","burger king","subway","starbucks","cafe","kaffee","pizz","sushi","kebab","d\xf6ner","gastronomie","bistro"]},{categoryName:"Abos & Subscriptions",keywords:["spotify","netflix","disney+","amazon prime","apple","icloud","google storage","youtube premium","crunchyroll","chatgpt","openai","notion","figma","adobe","microsoft","github","vercel","hetzner","digitalocean","cloudflare","fitnessstudio","mcfit","gym","john reed"]},{categoryName:"Gesundheit",keywords:["apotheke","arzt","praxis","krankenhaus","klinik","physiotherapie","zahnarzt","krankenkasse","tk ","aok","barmer","dak"]},{categoryName:"Entertainment",keywords:["kino","cinema","steam","playstation","xbox","nintendo","gaming","konzert","ticket","eventim","club","disco","party","festival"]},{categoryName:"Geschenke",keywords:["geschenk","blume","fleurop","amazon.de marketplace"]},{categoryName:"Gehalt",keywords:["gehalt","lohn","verg\xfctung","arbeitgeber"]},{categoryName:"Freelance",keywords:["honorar","rechnung","freelance","projekt","beratung"]}];function n(e,t,a){let n="".concat(e," ").concat(t).toLowerCase();for(let e of s)for(let t of e.keywords)if(n.includes(t.toLowerCase()))return e.categoryName;return null}function r(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}function l(e){return["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"][e]}},14958:function(e,t,a){a.d(t,{O:function(){return s}});let s=(0,a(27688).eI)("https://lvhxabadywdqeepymwdm.supabase.co","sb_publishable_bF5kedUI50llEI-r1yaxIg_8Q6sauiD")}}]);
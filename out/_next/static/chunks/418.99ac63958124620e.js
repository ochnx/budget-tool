"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{61524:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57976:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},11418:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var s=a(3827),n=a(64090),r=a(14958),l=a(18695),i=a(50509),o=a(87461);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,o.Z)("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);var d=a(10775),m=a(17252);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,o.Z)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var u=a(57976),h=a(61524),p=a(26587),g=a(24897),b=a(98308),k=a(74994),f=a(10166),j=a(94866);let y=["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau","agesa","versicherung","haftpflicht","krankenversicherung","allianz","huk","ergo","fitnessstudio","mcfit","gym","john reed","fitness","urban sports","aspria","spotify","netflix","disney","amazon prime","apple","icloud","google storage","youtube premium","crunchyroll","chatgpt","openai","itunes","itunesappst",".itunesappst","notion","figma","adobe","microsoft","github","vercel","hetzner","digitalocean","cloudflare","deadline funnel","deadlinefunnel","zapier","slack","fliki","capcut","higgsfield","deutschlandticket","mvv","bahncard","telekom","vodafone","o2","1&1","congstar","mobilfunk","internet","dsl","strom","gas","stadtwerke","energie","swm","dauerauftrag","lastschrift","monatlich","abo","subscription","recurring","mitglied","mitgliedschaft","paypal"],N=["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau","agesa","versicherung","haftpflicht","krankenversicherung","allianz","huk","ergo","telekom","vodafone","o2","1&1","congstar","mobilfunk","strom","gas","stadtwerke","energie","swm","deutschlandticket","mvv","bahncard"];function v(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0);async function v(){o(!0);let e=new Date;e.setMonth(e.getMonth()-3);let{data:a}=await r.O.from("transactions").select("*, category:categories(*)").eq("is_income",!1).gte("date",e.toISOString().split("T")[0]).order("date",{ascending:!1});a&&t(a),o(!1)}(0,n.useEffect)(()=>{v()},[]);let w=(0,n.useMemo)(()=>{let t=new Map;e.forEach(e=>{let a=(e.recipient||e.description||"Unbekannt").toLowerCase().trim(),s=t.get(a)||[];s.push(e),t.set(a,s)});let a=[],s=[];t.forEach((e,t)=>{let n=t.toLowerCase(),r=e.map(e=>"".concat((e.recipient||"").toLowerCase()," ").concat((e.description||"").toLowerCase())).join(" "),l="".concat(n," ").concat(r),i=y.some(e=>l.includes(e)),o=e.map(e=>Number(e.amount)),c=o.length>0?o.reduce((e,t)=>e+t,0)/o.length:0,d=o.length>=2&&o.every(e=>Math.abs(e-c)/(c||1)<.15);if(i||d){let s=e[0].category,n=N.some(e=>l.includes(e)),r=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),i=Number(r[0].amount),o=e[0].recipient||e[0].description||t;a.push({name:o,amount:i,category:(null==s?void 0:s.name)||"Unkategorisiert",categoryIcon:(null==s?void 0:s.icon)||"❓",categoryColor:(null==s?void 0:s.color)||"#6B7280",isCancellable:!n,transactions:r})}else s.push(...e)}),a.sort((e,t)=>t.amount-e.amount);let n=a.reduce((e,t)=>e+t.amount,0),r=a.filter(e=>e.isCancellable).reduce((e,t)=>e+t.amount,0),l=new Set;e.forEach(e=>{let t=new Date(e.date);l.add("".concat(t.getFullYear(),"-").concat(t.getMonth()))});let i=Math.max(1,l.size),o=s.reduce((e,t)=>e+Number(t.amount),0)/i,c=new Map;a.forEach(e=>{let t=e.category,a=c.get(t);a?a.total+=e.amount:c.set(t,{name:e.category,icon:e.categoryIcon,color:e.categoryColor,total:e.amount})});let d=Array.from(c.values()).sort((e,t)=>t.total-e.total);return{fixedCosts:a,totalFixed:n,totalCancellable:r,totalVariable:o,fixedCount:a.length,cancellableCount:a.filter(e=>e.isCancellable).length,categoryBreakdown:d,monthCount:i}},[e]);return a?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-dark-50",children:"Fixkosten"}),(0,s.jsx)("p",{className:"text-dark-400 mt-1",children:"Das geht jeden Monat raus — automatisch erkannt aus deinen Transaktionen"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-red-500/15",children:(0,s.jsx)(i.Z,{size:20,className:"text-red-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Fixkosten/Monat"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-400",children:(0,l.xG)(w.totalFixed)}),(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[w.fixedCount," wiederkehrende Posten"]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-amber-500/15",children:(0,s.jsx)(c,{size:20,className:"text-amber-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"K\xfcndbar"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:(0,l.xG)(w.totalCancellable)}),(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[w.cancellableCount," optionale Abos"]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-cyan-500/15",children:(0,s.jsx)(d.Z,{size:20,className:"text-cyan-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"\xd8 Variable Kosten"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-cyan-400",children:(0,l.xG)(w.totalVariable)}),(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:["pro Monat (\xd8 ",1===w.monthCount?"aktueller Monat":"".concat(w.monthCount," Monate"),")"]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-purple-500/15",children:(0,s.jsx)(m.Z,{size:20,className:"text-purple-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Fix vs. Variabel"})]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-400",children:[w.totalFixed+w.totalVariable>0?(w.totalFixed/(w.totalFixed+w.totalVariable)*100).toFixed(0):0,"% fix"]}),(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[(0,l.xG)(w.totalFixed+w.totalVariable)," gesamt"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[w.categoryBreakdown.length>0&&(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(x,{size:20,className:"text-dark-400"}),"Fixkosten nach Kategorie"]}),(0,s.jsx)(p.h,{width:"100%",height:300,children:(0,s.jsxs)(g.u,{children:[(0,s.jsx)(b.b,{data:w.categoryBreakdown,cx:"50%",cy:"50%",innerRadius:55,outerRadius:100,paddingAngle:3,dataKey:"total",nameKey:"name",children:w.categoryBreakdown.map((e,t)=>(0,s.jsx)(k.b,{fill:e.color,stroke:"transparent"},"cell-".concat(t)))}),(0,s.jsx)(f.u,{content:(0,s.jsx)(e=>{let{active:t,payload:a}=e;return t&&a&&a.length?(0,s.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-dark-100",children:[a[0].payload.icon," ",a[0].payload.name]}),(0,s.jsxs)("p",{className:"text-sm text-emerald-400 font-bold",children:[(0,l.xG)(a[0].value),"/Monat"]})]}):null},{})}),(0,s.jsx)(j.D,{formatter:e=>(0,s.jsx)("span",{className:"text-dark-300 text-sm",children:e})})]})})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[(0,s.jsx)(c,{size:20,className:"text-amber-400"}),"Das k\xf6nntest du k\xfcndigen"]}),(0,s.jsxs)("p",{className:"text-sm text-dark-400 mb-4",children:["Optionale Abos & Subscriptions — ",(0,l.xG)(w.totalCancellable),"/Monat = ",(0,l.xG)(12*w.totalCancellable),"/Jahr"]}),0===w.fixedCosts.filter(e=>e.isCancellable).length?(0,s.jsxs)("div",{className:"flex items-center gap-3 py-6 text-dark-400 justify-center",children:[(0,s.jsx)(u.Z,{size:24,className:"text-emerald-400"}),(0,s.jsx)("span",{children:"Keine k\xfcndbaren Abos erkannt"})]}):(0,s.jsx)("div",{className:"space-y-2",children:w.fixedCosts.filter(e=>e.isCancellable).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-amber-500/5 border border-amber-500/10 hover:border-amber-500/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-lg",children:e.categoryIcon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-dark-100",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-dark-400",children:e.category})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-bold text-amber-400",children:[(0,l.xG)(e.amount),"/Mo"]}),(0,s.jsxs)("p",{className:"text-xs text-dark-500",children:[(0,l.xG)(12*e.amount),"/Jahr"]})]})]},t))})]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Alle Fixkosten",(0,s.jsxs)("span",{className:"text-sm text-dark-400 font-normal ml-2",children:["(",w.fixedCount," Posten \xb7 ",(0,l.xG)(w.totalFixed),"/Monat)"]})]}),0===w.fixedCosts.length?(0,s.jsxs)("div",{className:"text-center py-12 text-dark-400",children:[(0,s.jsx)(i.Z,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-lg",children:"Keine Fixkosten erkannt"}),(0,s.jsx)("p",{className:"text-sm text-dark-500 mt-1",children:"Importiere mehr Transaktionsdaten f\xfcr bessere Erkennung"})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[w.fixedCosts.map((e,t)=>{let a=w.totalFixed>0?e.amount/w.totalFixed*100:0;return(0,s.jsxs)("div",{className:"flex items-center gap-3 py-3 px-4 rounded-xl hover:bg-dark-700/50 ".concat(e.isCancellable?"border-l-2 border-amber-500/50":""),children:[(0,s.jsx)("span",{className:"text-xl w-8 text-center",children:e.categoryIcon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-dark-100 truncate",children:e.name}),e.isCancellable&&(0,s.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-amber-500/15 text-amber-400 rounded-full font-medium",children:"k\xfcndbar"})]}),(0,s.jsxs)("span",{className:"text-sm font-bold text-red-400 flex-shrink-0 ml-2",children:[(0,l.xG)(e.amount),"/Mo"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs text-dark-500",children:e.category}),(0,s.jsx)("span",{className:"text-xs text-dark-600",children:"\xb7"}),(0,s.jsxs)("span",{className:"text-xs text-dark-500",children:[(0,l.xG)(12*e.amount),"/Jahr"]})]}),(0,s.jsxs)("span",{className:"text-xs text-dark-500",children:[a.toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-1.5 mt-1.5 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(a,"%"),backgroundColor:e.categoryColor}})})]})]},t)}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 mt-3 border-t border-dark-700/50 px-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-bold text-dark-200",children:"Gesamt Fixkosten"}),(0,s.jsxs)("span",{className:"text-xs text-dark-500 ml-2",children:["(",(0,l.xG)(12*w.totalFixed),"/Jahr)"]})]}),(0,s.jsxs)("span",{className:"text-lg font-bold text-red-400",children:[(0,l.xG)(w.totalFixed),"/Mo"]})]})]})]}),(0,s.jsx)("div",{className:"glass rounded-2xl p-5 border border-dark-600/50",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(h.Z,{size:20,className:"text-amber-400 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-dark-200",children:"Wie erkennt das Tool Fixkosten?"}),(0,s.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Fixkosten werden sofort anhand von Schl\xfcsselw\xf6rtern (Miete, Spotify, Telekom, etc.) erkannt — auch bei nur einem Monat Daten. Zus\xe4tzlich: gleicher Empf\xe4nger mit \xe4hnlichem Betrag \xfcber 2+ Monate = automatisch Fixkosten."})]})]})})]})}},18695:function(e,t,a){a.d(t,{Wd:function(){return n},ZY:function(){return l},xG:function(){return r}});let s=[{categoryName:"Miete",keywords:["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau"]},{categoryName:"Lebensmittel",keywords:["rewe","edeka","aldi","lidl","netto","penny","kaufland","dm-drogerie","dm ","rossmann","supermarkt","lebensmittel","norma","real"]},{categoryName:"Klamotten",keywords:["zara","h&m","zalando","about you","aboutyou","asos","nike","adidas","cos ","uniqlo","pull&bear","bershka","massimo dutti","mango","snipes","foot locker","footlocker","mr porter","end clothing","ssense","farfetch","kickz","hhv"]},{categoryName:"Transport",keywords:["db ","deutsche bahn","bahn","deutschlandticket","mvv","uber","bolt","freenow","free now","tier","lime","voi","tankstelle","aral","shell","esso","jet tanken","adac","flixbus","taxi"]},{categoryName:"Restaurants",keywords:["restaurant","lieferando","uber eats","ubereats","wolt","doordash","mcdonalds","mcdonald","burger king","subway","starbucks","cafe","kaffee","pizz","sushi","kebab","d\xf6ner","gastronomie","bistro"]},{categoryName:"Abos & Subscriptions",keywords:["spotify","netflix","disney+","amazon prime","apple","icloud","google storage","youtube premium","crunchyroll","chatgpt","openai","notion","figma","adobe","microsoft","github","vercel","hetzner","digitalocean","cloudflare","fitnessstudio","mcfit","gym","john reed"]},{categoryName:"Gesundheit",keywords:["apotheke","arzt","praxis","krankenhaus","klinik","physiotherapie","zahnarzt","krankenkasse","tk ","aok","barmer","dak"]},{categoryName:"Entertainment",keywords:["kino","cinema","steam","playstation","xbox","nintendo","gaming","konzert","ticket","eventim","club","disco","party","festival"]},{categoryName:"Geschenke",keywords:["geschenk","blume","fleurop","amazon.de marketplace"]},{categoryName:"Gehalt",keywords:["gehalt","lohn","verg\xfctung","arbeitgeber"]},{categoryName:"Freelance",keywords:["honorar","rechnung","freelance","projekt","beratung"]}];function n(e,t,a){let n="".concat(e," ").concat(t).toLowerCase();for(let e of s)for(let t of e.keywords)if(n.includes(t.toLowerCase()))return e.categoryName;return null}function r(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}function l(e){return["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"][e]}},14958:function(e,t,a){a.d(t,{O:function(){return s}});let s=(0,a(27688).eI)("https://lvhxabadywdqeepymwdm.supabase.co","sb_publishable_bF5kedUI50llEI-r1yaxIg_8Q6sauiD")}}]);
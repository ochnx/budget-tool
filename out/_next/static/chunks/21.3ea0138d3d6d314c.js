"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{60585:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},49108:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},37805:function(e,t,a){a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(87461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},81433:function(e,t,a){a.d(t,{v:function(){return d}});var s=a(28777),n=a(78720),r=a(23356),l=a(22983),i=a(12627),d=(0,s.z)({chartName:"BarChart",GraphicalChild:n.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:r.K},{axisType:"yAxis",AxisComp:l.B}],formatAxisMap:i.t9})},3021:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var s=a(3827),n=a(64090),r=a(14958),l=a(18695),i=a(49108),d=a(37805),o=a(29733),c=a(10775),m=a(17252);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,a(87461).Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var h=a(60585),u=a(26587),g=a(24897),p=a(98308),b=a(74994),f=a(10166),k=a(94866),y=a(81433),j=a(23356),N=a(22983),v=a(78720);function w(){let[e,t]=(0,n.useState)([]),[a,w]=(0,n.useState)([]),[z,D]=(0,n.useState)(()=>{let e=new Date;return{month:e.getMonth(),year:e.getFullYear()}}),[A,M]=(0,n.useState)(!0),[C,B]=(0,n.useState)(!1);async function G(){M(!0);let e=new Date(z.year,z.month,1),a=new Date(z.year,z.month+1,0),[s,n]=await Promise.all([r.O.from("transactions").select("*, category:categories(*)").gte("date",e.toISOString().split("T")[0]).lte("date",a.toISOString().split("T")[0]).order("date",{ascending:!1}),r.O.from("categories").select("*").order("sort_order")]);s.data&&t(s.data),n.data&&w(n.data),M(!1)}(0,n.useEffect)(()=>{B(!0)},[]),(0,n.useEffect)(()=>{G()},[z]);let S=(0,n.useMemo)(()=>{let t=e.filter(e=>e.is_income).reduce((e,t)=>e+Number(t.amount),0),a=e.filter(e=>!e.is_income).reduce((e,t)=>e+Number(t.amount),0),s=e.length,n=new Map;return e.filter(e=>!e.is_income).forEach(e=>{let t=e.category,a=(null==t?void 0:t.id)||"uncategorized",s=n.get(a);s?s.total+=Number(e.amount):n.set(a,{name:(null==t?void 0:t.name)||"Unkategorisiert",icon:(null==t?void 0:t.icon)||"❓",color:(null==t?void 0:t.color)||"#6B7280",total:Number(e.amount)})}),{income:t,expenses:a,balance:t-a,txCount:s,categoryBreakdown:Array.from(n.values()).sort((e,t)=>t.total-e.total)}},[e]),E=e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=S.expenses>0?(a[0].value/S.expenses*100).toFixed(1):"0";return(0,s.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-dark-100",children:[a[0].payload.icon," ",a[0].payload.name||a[0].name]}),(0,s.jsx)("p",{className:"text-sm text-emerald-400 font-bold",children:(0,l.xG)(a[0].value)}),(0,s.jsxs)("p",{className:"text-xs text-dark-400",children:[e,"% der Ausgaben"]})]})}return null};if(A)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})});let T=(0,n.useMemo)(()=>{if(0===e.length)return{label:"",isPartial:!1,daysCovered:0};let t=e.map(e=>new Date(e.date).getTime()),a=new Date(Math.min(...t)),s=Math.max(1,Math.ceil((new Date(Math.max(...t)).getTime()-a.getTime())/864e5)+1),n=new Date(z.year,z.month+1,0).getDate(),r=s<.7*n;return{label:r?"Woche 1–".concat(Math.ceil(s/7)):"",isPartial:r,daysCovered:s,daysInMonth:n}},[e,z]),Z=S.income>0?S.balance/S.income*100:0,K=Z<0?"Defizit ".concat(Math.abs(Z).toFixed(1),"%"):"".concat(Z.toFixed(1),"%");return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-dark-50",children:"Dashboard"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{onClick:function(){D(e=>0===e.month?{month:11,year:e.year-1}:{...e,month:e.month-1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,s.jsx)(i.Z,{size:20})}),(0,s.jsxs)("span",{className:"text-lg font-semibold min-w-[180px] text-center",children:[(0,l.ZY)(z.month)," ",z.year]}),(0,s.jsx)("button",{onClick:function(){D(e=>11===e.month?{month:0,year:e.year+1}:{...e,month:e.month+1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,s.jsx)(d.Z,{size:20})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-emerald-500/15",children:(0,s.jsx)(o.Z,{size:20,className:"text-emerald-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Einnahmen"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:(0,l.xG)(S.income)})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-red-500/15",children:(0,s.jsx)(c.Z,{size:20,className:"text-red-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Ausgaben"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-400",children:(0,l.xG)(S.expenses)})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-cyan-500/15",children:(0,s.jsx)(m.Z,{size:20,className:"text-cyan-400"})}),(0,s.jsxs)("span",{className:"text-sm text-dark-400",children:["Bilanz",T.isPartial?" (".concat(T.label,")"):" diesen Monat"]})]}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(S.balance>=0?"text-emerald-400":"text-red-400"),children:[S.balance>=0?"+":"",(0,l.xG)(S.balance)]}),(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[(0,l.xG)(S.income)," Einnahmen − ",(0,l.xG)(S.expenses)," Ausgaben"]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-amber-500/15",children:(0,s.jsx)(x,{size:20,className:"text-amber-400"})}),(0,s.jsxs)("span",{className:"text-sm text-dark-400",children:["Sparquote",T.isPartial?" (".concat(T.label,")"):""]})]}),(0,s.jsx)("p",{className:"text-2xl font-bold ".concat(Z>=0?"text-emerald-400":"text-red-400"),children:K}),T.isPartial&&S.income>0&&(0,s.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:["Hochrechnung: ~",(0,l.xG)(S.balance/(T.daysCovered||1)*(T.daysInMonth||30)),"/Monat"]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2.5 rounded-xl bg-purple-500/15",children:(0,s.jsx)(h.Z,{size:20,className:"text-purple-400"})}),(0,s.jsx)("span",{className:"text-sm text-dark-400",children:"Transaktionen"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-400",children:S.txCount})]})]}),C&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben nach Kategorie"}),0===S.categoryBreakdown.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-dark-400",children:"Keine Ausgaben diesen Monat"}):(0,s.jsx)("div",{style:{width:"100%",height:350},children:(0,s.jsx)(u.h,{width:"100%",height:"100%",children:(0,s.jsxs)(g.u,{children:[(0,s.jsx)(p.b,{data:S.categoryBreakdown,cx:"50%",cy:"50%",innerRadius:60,outerRadius:110,paddingAngle:2,dataKey:"total",nameKey:"name",isAnimationActive:!0,children:S.categoryBreakdown.map((e,t)=>(0,s.jsx)(b.b,{fill:e.color,stroke:"transparent"},"cell-".concat(t)))}),(0,s.jsx)(f.u,{content:(0,s.jsx)(E,{})}),(0,s.jsx)(k.D,{formatter:e=>(0,s.jsx)("span",{className:"text-dark-300 text-sm",children:e})})]})})})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Alle Ausgaben-Kategorien",(0,s.jsxs)("span",{className:"text-sm text-dark-400 font-normal ml-2",children:["(",S.categoryBreakdown.length," Kategorien)"]})]}),0===S.categoryBreakdown.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-dark-400",children:"Keine Ausgaben diesen Monat"}):(0,s.jsx)("div",{style:{width:"100%",height:Math.max(300,44*S.categoryBreakdown.length)},children:(0,s.jsx)(u.h,{width:"100%",height:"100%",children:(0,s.jsxs)(y.v,{data:S.categoryBreakdown,layout:"vertical",margin:{top:0,right:60,bottom:0,left:10},children:[(0,s.jsx)(j.K,{type:"number",hide:!0}),(0,s.jsx)(N.B,{type:"category",dataKey:"name",width:130,tick:{fill:"#94a3b8",fontSize:13},axisLine:!1,tickLine:!1}),(0,s.jsx)(f.u,{content:(0,s.jsx)(E,{}),cursor:{fill:"rgba(255,255,255,0.05)"}}),(0,s.jsx)(v.$,{dataKey:"total",radius:[0,8,8,0],barSize:28,label:e=>{let{value:t,x:a,y:n,width:r,height:i}=e;return(0,s.jsx)("text",{x:a+r+8,y:n+i/2,fill:"#94a3b8",fontSize:12,dominantBaseline:"middle",children:(0,l.xG)(t)})},children:S.categoryBreakdown.map((e,t)=>(0,s.jsx)(b.b,{fill:e.color},"bar-".concat(t)))})]})})})]})]}),S.categoryBreakdown.length>0&&(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben-Details"}),(0,s.jsxs)("div",{className:"space-y-2",children:[S.categoryBreakdown.map((e,t)=>{let a=S.expenses>0?e.total/S.expenses*100:0;return(0,s.jsxs)("div",{className:"flex items-center gap-3 py-3 px-4 rounded-xl hover:bg-dark-700/50",children:[(0,s.jsx)("span",{className:"text-xl w-8 text-center",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-dark-100",children:e.name}),(0,s.jsx)("span",{className:"text-sm font-bold text-red-400",children:(0,l.xG)(e.total)})]}),(0,s.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(a,"%"),backgroundColor:e.color}})})]}),(0,s.jsxs)("span",{className:"text-xs text-dark-400 w-12 text-right",children:[a.toFixed(1),"%"]})]},t)}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-3 mt-2 border-t border-dark-700/50 px-4",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-dark-200",children:"Gesamt"}),(0,s.jsx)("span",{className:"text-sm font-bold text-red-400",children:(0,l.xG)(S.expenses)})]})]})]}),(0,s.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Letzte Transaktionen"}),0===e.length?(0,s.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Noch keine Transaktionen. Importiere deinen Kontoauszug! \uD83D\uDCC4"}):(0,s.jsx)("div",{className:"space-y-2",children:e.slice(0,10).map(e=>{let t=e.category;return(0,s.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl hover:bg-dark-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-xl",children:(null==t?void 0:t.icon)||"\uD83D\uDCE6"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-dark-100 truncate max-w-[200px] sm:max-w-[300px]",children:e.recipient||e.description||"Unbekannt"}),(0,s.jsxs)("p",{className:"text-xs text-dark-400",children:[new Date(e.date).toLocaleDateString("de-DE")," \xb7 ",(null==t?void 0:t.name)||"Unkategorisiert"]})]})]}),(0,s.jsxs)("span",{className:"text-sm font-bold ".concat(e.is_income?"text-emerald-400":"text-red-400"),children:[e.is_income?"+":"-",(0,l.xG)(Number(e.amount))]})]},e.id)})})]})]})}},18695:function(e,t,a){a.d(t,{Wd:function(){return n},ZY:function(){return l},xG:function(){return r}});let s=[{categoryName:"Miete",keywords:["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau"]},{categoryName:"Lebensmittel",keywords:["rewe","edeka","aldi","lidl","netto","penny","kaufland","dm-drogerie","dm ","rossmann","supermarkt","lebensmittel","norma","real"]},{categoryName:"Klamotten",keywords:["zara","h&m","zalando","about you","aboutyou","asos","nike","adidas","cos ","uniqlo","pull&bear","bershka","massimo dutti","mango","snipes","foot locker","footlocker","mr porter","end clothing","ssense","farfetch","kickz","hhv"]},{categoryName:"Transport",keywords:["db ","deutsche bahn","bahn","deutschlandticket","mvv","uber","bolt","freenow","free now","tier","lime","voi","tankstelle","aral","shell","esso","jet tanken","adac","flixbus","taxi"]},{categoryName:"Restaurants",keywords:["restaurant","lieferando","uber eats","ubereats","wolt","doordash","mcdonalds","mcdonald","burger king","subway","starbucks","cafe","kaffee","pizz","sushi","kebab","d\xf6ner","gastronomie","bistro"]},{categoryName:"Abos & Subscriptions",keywords:["spotify","netflix","disney+","amazon prime","apple","icloud","google storage","youtube premium","crunchyroll","chatgpt","openai","notion","figma","adobe","microsoft","github","vercel","hetzner","digitalocean","cloudflare","fitnessstudio","mcfit","gym","john reed"]},{categoryName:"Gesundheit",keywords:["apotheke","arzt","praxis","krankenhaus","klinik","physiotherapie","zahnarzt","krankenkasse","tk ","aok","barmer","dak"]},{categoryName:"Entertainment",keywords:["kino","cinema","steam","playstation","xbox","nintendo","gaming","konzert","ticket","eventim","club","disco","party","festival"]},{categoryName:"Geschenke",keywords:["geschenk","blume","fleurop","amazon.de marketplace"]},{categoryName:"Gehalt",keywords:["gehalt","lohn","verg\xfctung","arbeitgeber"]},{categoryName:"Freelance",keywords:["honorar","rechnung","freelance","projekt","beratung"]}];function n(e,t,a){let n="".concat(e," ").concat(t).toLowerCase();for(let e of s)for(let t of e.keywords)if(n.includes(t.toLowerCase()))return e.categoryName;return null}function r(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}function l(e){return["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"][e]}},14958:function(e,t,a){a.d(t,{O:function(){return s}});let s=(0,a(27688).eI)("https://lvhxabadywdqeepymwdm.supabase.co","sb_publishable_bF5kedUI50llEI-r1yaxIg_8Q6sauiD")}}]);
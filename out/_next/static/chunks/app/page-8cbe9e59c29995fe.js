(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{36883:function(e,t,s){Promise.resolve().then(s.bind(s,95209))},95209:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ey}});var a=s(3827),r=s(64090),n=s(5423),l=s(11775),d=s(50509),i=s(44048),c=s(10632),o=s(56227),x=s(76338),m=s(26329),u=s(52235),h=s(79744);let p=[{id:"dashboard",label:"Dashboard",icon:(0,a.jsx)(n.Z,{size:20})},{id:"transactions",label:"Transaktionen",icon:(0,a.jsx)(l.Z,{size:20})},{id:"fixkosten",label:"Fixkosten",icon:(0,a.jsx)(d.Z,{size:20})},{id:"deepdive",label:"Deep Dive",icon:(0,a.jsx)(i.Z,{size:20})},{id:"import",label:"CSV Import",icon:(0,a.jsx)(c.Z,{size:20})},{id:"budget",label:"Budgets",icon:(0,a.jsx)(o.Z,{size:20})},{id:"savings",label:"Sparziele",icon:(0,a.jsx)(x.Z,{size:20})},{id:"salary",label:"Gehaltsrechner",icon:(0,a.jsx)(m.Z,{size:20})}];function g(e){let{activeTab:t,onTabChange:s}=e,[n,l]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 glass border-b border-dark-700/50 px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-lg font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent",children:"\uD83D\uDCB0 Budget Tool"}),(0,a.jsx)("button",{onClick:()=>l(!n),className:"p-2 rounded-lg hover:bg-dark-700",children:n?(0,a.jsx)(u.Z,{size:24}):(0,a.jsx)(h.Z,{size:24})})]}),n&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 z-40 bg-dark-950/80 backdrop-blur-sm",onClick:()=>l(!1)}),(0,a.jsxs)("nav",{className:"\n        fixed top-0 left-0 h-full z-40 w-64 glass border-r border-dark-700/50\n        transform transition-transform duration-300 ease-in-out\n        lg:translate-x-0\n        ".concat(n?"translate-x-0":"-translate-x-full","\n      "),children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-emerald-400 to-cyan-400 bg-clip-text text-transparent mb-1",children:"\uD83D\uDCB0 Budget Tool"}),(0,a.jsx)("p",{className:"text-dark-400 text-sm",children:"Deine Finanzen im Griff"})]}),(0,a.jsx)("div",{className:"px-3 space-y-1",children:p.map(e=>(0,a.jsxs)("button",{onClick:()=>{s(e.id),l(!1)},className:"\n                w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium\n                transition-all duration-200\n                ".concat(t===e.id?"bg-emerald-500/15 text-emerald-400 border border-emerald-500/20":"text-dark-300 hover:text-dark-100 hover:bg-dark-700/50","\n              "),children:[e.icon,e.label]},e.id))}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:(0,a.jsx)("div",{className:"glass rounded-xl p-3 text-center",children:(0,a.jsx)("p",{className:"text-xs text-dark-400",children:"Made for Oskar \uD83D\uDE80"})})})]})]})}let b=(0,s(27688).eI)("https://lvhxabadywdqeepymwdm.supabase.co","sb_publishable_bF5kedUI50llEI-r1yaxIg_8Q6sauiD"),j=[{categoryName:"Miete",keywords:["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau"]},{categoryName:"Lebensmittel",keywords:["rewe","edeka","aldi","lidl","netto","penny","kaufland","dm-drogerie","dm ","rossmann","supermarkt","lebensmittel","norma","real"]},{categoryName:"Klamotten",keywords:["zara","h&m","zalando","about you","aboutyou","asos","nike","adidas","cos ","uniqlo","pull&bear","bershka","massimo dutti","mango","snipes","foot locker","footlocker","mr porter","end clothing","ssense","farfetch","kickz","hhv"]},{categoryName:"Transport",keywords:["db ","deutsche bahn","bahn","deutschlandticket","mvv","uber","bolt","freenow","free now","tier","lime","voi","tankstelle","aral","shell","esso","jet tanken","adac","flixbus","taxi"]},{categoryName:"Restaurants",keywords:["restaurant","lieferando","uber eats","ubereats","wolt","doordash","mcdonalds","mcdonald","burger king","subway","starbucks","cafe","kaffee","pizz","sushi","kebab","d\xf6ner","gastronomie","bistro"]},{categoryName:"Abos & Subscriptions",keywords:["spotify","netflix","disney+","amazon prime","apple","icloud","google storage","youtube premium","crunchyroll","chatgpt","openai","notion","figma","adobe","microsoft","github","vercel","hetzner","digitalocean","cloudflare","fitnessstudio","mcfit","gym","john reed"]},{categoryName:"Gesundheit",keywords:["apotheke","arzt","praxis","krankenhaus","klinik","physiotherapie","zahnarzt","krankenkasse","tk ","aok","barmer","dak"]},{categoryName:"Entertainment",keywords:["kino","cinema","steam","playstation","xbox","nintendo","gaming","konzert","ticket","eventim","club","disco","party","festival"]},{categoryName:"Geschenke",keywords:["geschenk","blume","fleurop","amazon.de marketplace"]},{categoryName:"Gehalt",keywords:["gehalt","lohn","verg\xfctung","arbeitgeber"]},{categoryName:"Freelance",keywords:["honorar","rechnung","freelance","projekt","beratung"]}];function f(e){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e)}function N(e){return["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"][e]}var k=s(49108),v=s(37805),y=s(29733),w=s(10775),D=s(17252),C=s(10822),S=s(60585),z=s(26587),_=s(24897),M=s(98308),T=s(74994),F=s(10166),E=s(94866),B=s(81433),Z=s(23356),A=s(22983),K=s(78720);function I(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[l,d]=(0,r.useState)(()=>{let e=new Date;return{month:e.getMonth(),year:e.getFullYear()}}),[i,c]=(0,r.useState)(!0);async function o(){c(!0);let e=new Date(l.year,l.month,1),s=new Date(l.year,l.month+1,0),[a,r]=await Promise.all([b.from("transactions").select("*, category:categories(*)").gte("date",e.toISOString().split("T")[0]).lte("date",s.toISOString().split("T")[0]).order("date",{ascending:!1}),b.from("categories").select("*").order("sort_order")]);a.data&&t(a.data),r.data&&n(r.data),c(!1)}(0,r.useEffect)(()=>{o()},[l]);let x=(0,r.useMemo)(()=>{let t=e.filter(e=>e.is_income).reduce((e,t)=>e+Number(t.amount),0),s=e.filter(e=>!e.is_income).reduce((e,t)=>e+Number(t.amount),0),a=e.length,r=new Map;return e.filter(e=>!e.is_income).forEach(e=>{let t=e.category,s=(null==t?void 0:t.id)||"uncategorized",a=r.get(s);a?a.total+=Number(e.amount):r.set(s,{name:(null==t?void 0:t.name)||"Unkategorisiert",icon:(null==t?void 0:t.icon)||"❓",color:(null==t?void 0:t.color)||"#6B7280",total:Number(e.amount)})}),{income:t,expenses:s,balance:t-s,txCount:a,categoryBreakdown:Array.from(r.values()).sort((e,t)=>t.total-e.total)}},[e]),m=e=>{let{active:t,payload:s}=e;if(t&&s&&s.length){let e=x.expenses>0?(s[0].value/x.expenses*100).toFixed(1):"0";return(0,a.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-dark-100",children:[s[0].payload.icon," ",s[0].payload.name||s[0].name]}),(0,a.jsx)("p",{className:"text-sm text-emerald-400 font-bold",children:f(s[0].value)}),(0,a.jsxs)("p",{className:"text-xs text-dark-400",children:[e,"% der Ausgaben"]})]})}return null};if(i)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})});let u=x.income>0?x.balance/x.income*100:0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-dark-50",children:"Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:function(){d(e=>0===e.month?{month:11,year:e.year-1}:{...e,month:e.month-1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,a.jsx)(k.Z,{size:20})}),(0,a.jsxs)("span",{className:"text-lg font-semibold min-w-[180px] text-center",children:[N(l.month)," ",l.year]}),(0,a.jsx)("button",{onClick:function(){d(e=>11===e.month?{month:0,year:e.year+1}:{...e,month:e.month+1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,a.jsx)(v.Z,{size:20})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-emerald-500/15",children:(0,a.jsx)(y.Z,{size:20,className:"text-emerald-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Einnahmen"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:f(x.income)})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-red-500/15",children:(0,a.jsx)(w.Z,{size:20,className:"text-red-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Ausgaben"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:f(x.expenses)})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-cyan-500/15",children:(0,a.jsx)(D.Z,{size:20,className:"text-cyan-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Bilanz"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold ".concat(x.balance>=0?"text-emerald-400":"text-red-400"),children:f(x.balance)})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-amber-500/15",children:(0,a.jsx)(C.Z,{size:20,className:"text-amber-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Sparquote"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(u>=0?"text-emerald-400":"text-red-400"),children:[u.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-purple-500/15",children:(0,a.jsx)(S.Z,{size:20,className:"text-purple-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Transaktionen"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-400",children:x.txCount})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben nach Kategorie"}),0===x.categoryBreakdown.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-dark-400",children:"Keine Ausgaben diesen Monat"}):(0,a.jsx)(z.h,{width:"100%",height:350,children:(0,a.jsxs)(_.u,{children:[(0,a.jsx)(M.b,{data:x.categoryBreakdown,cx:"50%",cy:"50%",innerRadius:60,outerRadius:110,paddingAngle:2,dataKey:"total",nameKey:"name",children:x.categoryBreakdown.map((e,t)=>(0,a.jsx)(T.b,{fill:e.color,stroke:"transparent"},"cell-".concat(t)))}),(0,a.jsx)(F.u,{content:(0,a.jsx)(m,{})}),(0,a.jsx)(E.D,{formatter:e=>(0,a.jsx)("span",{className:"text-dark-300 text-sm",children:e})})]})})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Alle Ausgaben-Kategorien",(0,a.jsxs)("span",{className:"text-sm text-dark-400 font-normal ml-2",children:["(",x.categoryBreakdown.length," Kategorien)"]})]}),0===x.categoryBreakdown.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-64 text-dark-400",children:"Keine Ausgaben diesen Monat"}):(0,a.jsx)(z.h,{width:"100%",height:Math.max(300,44*x.categoryBreakdown.length),children:(0,a.jsxs)(B.v,{data:x.categoryBreakdown,layout:"vertical",margin:{top:0,right:60,bottom:0,left:10},children:[(0,a.jsx)(Z.K,{type:"number",hide:!0}),(0,a.jsx)(A.B,{type:"category",dataKey:"name",width:130,tick:{fill:"#94a3b8",fontSize:13},axisLine:!1,tickLine:!1}),(0,a.jsx)(F.u,{content:(0,a.jsx)(m,{}),cursor:{fill:"rgba(255,255,255,0.05)"}}),(0,a.jsx)(K.$,{dataKey:"total",radius:[0,8,8,0],barSize:28,label:e=>{let{value:t,x:s,y:r,width:n,height:l}=e;return(0,a.jsx)("text",{x:s+n+8,y:r+l/2,fill:"#94a3b8",fontSize:12,dominantBaseline:"middle",children:f(t)})},children:x.categoryBreakdown.map((e,t)=>(0,a.jsx)(T.b,{fill:e.color},"bar-".concat(t)))})]})})]})]}),x.categoryBreakdown.length>0&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben-Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[x.categoryBreakdown.map((e,t)=>{let s=x.expenses>0?e.total/x.expenses*100:0;return(0,a.jsxs)("div",{className:"flex items-center gap-3 py-3 px-4 rounded-xl hover:bg-dark-700/50",children:[(0,a.jsx)("span",{className:"text-xl w-8 text-center",children:e.icon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-dark-100",children:e.name}),(0,a.jsx)("span",{className:"text-sm font-bold text-red-400",children:f(e.total)})]}),(0,a.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-2 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(s,"%"),backgroundColor:e.color}})})]}),(0,a.jsxs)("span",{className:"text-xs text-dark-400 w-12 text-right",children:[s.toFixed(1),"%"]})]},t)}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-3 mt-2 border-t border-dark-700/50 px-4",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-dark-200",children:"Gesamt"}),(0,a.jsx)("span",{className:"text-sm font-bold text-red-400",children:f(x.expenses)})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Letzte Transaktionen"}),0===e.length?(0,a.jsx)("p",{className:"text-dark-400 text-center py-8",children:"Noch keine Transaktionen. Importiere deinen Kontoauszug! \uD83D\uDCC4"}):(0,a.jsx)("div",{className:"space-y-2",children:e.slice(0,10).map(e=>{let t=e.category;return(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl hover:bg-dark-700/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-xl",children:(null==t?void 0:t.icon)||"\uD83D\uDCE6"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-100 truncate max-w-[200px] sm:max-w-[300px]",children:e.recipient||e.description||"Unbekannt"}),(0,a.jsxs)("p",{className:"text-xs text-dark-400",children:[new Date(e.date).toLocaleDateString("de-DE")," \xb7 ",(null==t?void 0:t.name)||"Unkategorisiert"]})]})]}),(0,a.jsxs)("span",{className:"text-sm font-bold ".concat(e.is_income?"text-emerald-400":"text-red-400"),children:[e.is_income?"+":"-",f(Number(e.amount))]})]},e.id)})})]})]})}var L=s(70094),O=s(28670),V=s(23441),G=s(50489);function q(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[i,c]=(0,r.useState)(""),[o,x]=(0,r.useState)("all"),[m,h]=(0,r.useState)("all"),[p,g]=(0,r.useState)("date"),[j,N]=(0,r.useState)("desc"),[k,v]=(0,r.useState)(null),[y,w]=(0,r.useState)(!1),[D,C]=(0,r.useState)({date:new Date().toISOString().split("T")[0],amount:"",description:"",recipient:"",category_id:"",is_income:!1,notes:""});async function z(){d(!0);let[e,s]=await Promise.all([b.from("transactions").select("*, category:categories(*)").order("date",{ascending:!1}).limit(500),b.from("categories").select("*").order("sort_order")]);e.data&&t(e.data),s.data&&n(s.data),d(!1)}async function _(e,t){await b.from("transactions").update({category_id:t||null}).eq("id",e),v(null),z()}async function M(e){confirm("Transaktion wirklich l\xf6schen?")&&(await b.from("transactions").delete().eq("id",e),z())}async function T(){D.amount&&D.date&&(await b.from("transactions").insert({date:D.date,amount:parseFloat(D.amount),description:D.description,recipient:D.recipient,category_id:D.category_id||null,is_income:D.is_income,notes:D.notes}),w(!1),C({date:new Date().toISOString().split("T")[0],amount:"",description:"",recipient:"",category_id:"",is_income:!1,notes:""}),z())}(0,r.useEffect)(()=>{z()},[]);let F=e.filter(e=>{if("income"===m&&!e.is_income||"expense"===m&&e.is_income||"all"!==o&&e.category_id!==o)return!1;if(i){var t,s,a;let r=i.toLowerCase();return((null===(t=e.description)||void 0===t?void 0:t.toLowerCase())||"").includes(r)||((null===(s=e.recipient)||void 0===s?void 0:s.toLowerCase())||"").includes(r)||((null===(a=e.notes)||void 0===a?void 0:a.toLowerCase())||"").includes(r)}return!0}).sort((e,t)=>{let s="asc"===j?1:-1;return"date"===p?s*(new Date(e.date).getTime()-new Date(t.date).getTime()):s*(Number(e.amount)-Number(t.amount))});function E(e){p===e?N(e=>"asc"===e?"desc":"asc"):(g(e),N("desc"))}return l?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Transaktionen"}),(0,a.jsxs)("button",{onClick:()=>w(!y),className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-sm font-medium",children:[y?(0,a.jsx)(u.Z,{size:16}):(0,a.jsx)(L.Z,{size:16}),y?"Abbrechen":"Neue Transaktion"]})]}),y&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Neue Transaktion hinzuf\xfcgen"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Datum"}),(0,a.jsx)("input",{type:"date",value:D.date,onChange:e=>C({...D,date:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-dark-100 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Betrag (€)"}),(0,a.jsx)("input",{type:"number",step:"0.01",placeholder:"0,00",value:D.amount,onChange:e=>C({...D,amount:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-dark-100 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Empf\xe4nger"}),(0,a.jsx)("input",{type:"text",placeholder:"z.B. REWE",value:D.recipient,onChange:e=>C({...D,recipient:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-dark-100 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Beschreibung"}),(0,a.jsx)("input",{type:"text",placeholder:"Was war das?",value:D.description,onChange:e=>C({...D,description:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-dark-100 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Kategorie"}),(0,a.jsxs)("select",{value:D.category_id,onChange:e=>C({...D,category_id:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-dark-100 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[(0,a.jsx)("option",{value:"",children:"— Keine —"}),s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]})]}),(0,a.jsxs)("div",{className:"flex items-end gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:D.is_income,onChange:e=>C({...D,is_income:e.target.checked}),className:"w-4 h-4 rounded accent-emerald-500"}),(0,a.jsx)("span",{className:"text-sm text-dark-300",children:"Einnahme"})]}),(0,a.jsx)("button",{onClick:T,className:"px-6 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-sm font-medium",children:"Speichern"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)(O.Z,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-dark-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Suchen...",value:i,onChange:e=>c(e.target.value),className:"w-full pl-9 pr-3 py-2.5 bg-dark-800 border border-dark-700 rounded-xl text-sm text-dark-100 placeholder-dark-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"px-3 py-2.5 bg-dark-800 border border-dark-700 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[(0,a.jsx)("option",{value:"all",children:"Alle Kategorien"}),s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]}),(0,a.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"px-3 py-2.5 bg-dark-800 border border-dark-700 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[(0,a.jsx)("option",{value:"all",children:"Alles"}),(0,a.jsx)("option",{value:"income",children:"Einnahmen"}),(0,a.jsx)("option",{value:"expense",children:"Ausgaben"})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-2 px-4 py-3 bg-dark-800/60 border-b border-dark-700/50 text-xs font-semibold text-dark-400 uppercase tracking-wider",children:[(0,a.jsxs)("button",{className:"col-span-2 flex items-center gap-1 hover:text-dark-200",onClick:()=>E("date"),children:["Datum ",(0,a.jsx)(S.Z,{size:12})]}),(0,a.jsx)("div",{className:"col-span-3",children:"Empf\xe4nger"}),(0,a.jsx)("div",{className:"col-span-3",children:"Beschreibung"}),(0,a.jsx)("div",{className:"col-span-2",children:"Kategorie"}),(0,a.jsxs)("button",{className:"col-span-1 flex items-center gap-1 hover:text-dark-200 justify-end",onClick:()=>E("amount"),children:["Betrag ",(0,a.jsx)(S.Z,{size:12})]}),(0,a.jsx)("div",{className:"col-span-1"})]}),0===F.length?(0,a.jsx)("div",{className:"py-12 text-center text-dark-400",children:"Keine Transaktionen gefunden"}):(0,a.jsx)("div",{className:"divide-y divide-dark-700/30",children:F.map(e=>{let t=e.category;return(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 px-4 py-3 hover:bg-dark-700/30 items-center",children:[(0,a.jsx)("div",{className:"sm:col-span-2 text-sm text-dark-300",children:new Date(e.date).toLocaleDateString("de-DE")}),(0,a.jsx)("div",{className:"sm:col-span-3 text-sm font-medium text-dark-100 truncate",children:e.recipient||"—"}),(0,a.jsx)("div",{className:"sm:col-span-3 text-sm text-dark-400 truncate",children:e.description||"—"}),(0,a.jsx)("div",{className:"sm:col-span-2",children:k===e.id?(0,a.jsxs)("select",{autoFocus:!0,defaultValue:e.category_id||"",onChange:t=>_(e.id,t.target.value),onBlur:()=>v(null),className:"w-full px-2 py-1 bg-dark-700 border border-dark-600 rounded-lg text-xs text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[(0,a.jsx)("option",{value:"",children:"— Keine —"}),s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]}):(0,a.jsxs)("button",{onClick:()=>v(e.id),className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-medium hover:bg-dark-700/50",style:{color:(null==t?void 0:t.color)||"#6B7280"},children:[(0,a.jsx)("span",{children:(null==t?void 0:t.icon)||"❓"}),(0,a.jsx)("span",{children:(null==t?void 0:t.name)||"Kategorie w\xe4hlen"}),(0,a.jsx)(V.Z,{size:12})]})}),(0,a.jsxs)("div",{className:"sm:col-span-1 text-sm font-bold text-right ".concat(e.is_income?"text-emerald-400":"text-red-400"),children:[e.is_income?"+":"-",f(Number(e.amount))]}),(0,a.jsx)("div",{className:"sm:col-span-1 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>M(e.id),className:"p-1.5 rounded-lg text-dark-500 hover:text-red-400 hover:bg-red-500/10",children:(0,a.jsx)(G.Z,{size:14})})})]},e.id)})})]}),(0,a.jsxs)("p",{className:"text-sm text-dark-500 text-center",children:[F.length," von ",e.length," Transaktionen"]})]})}var P=s(46491),U=s.n(P),W=s(98998),R=s(80037),J=s(18994),Y=s(69475);function $(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[l,d]=(0,r.useState)(new Map),[i,o]=(0,r.useState)(!1),[x,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(0),[p,g]=(0,r.useState)(null),[N,k]=(0,r.useState)(!1),v=(0,r.useRef)(null);async function y(){let{data:e}=await b.from("categories").select("*").order("sort_order");e&&t(e)}function w(t){g(null),m(!1);let s=new FileReader;s.onload=t=>{try{var s;let a=null===(s=t.target)||void 0===s?void 0:s.result,r=function(e){let t=U().parse(e,{header:!0,delimiter:";",skipEmptyLines:!0});return t.errors.length>0&&console.warn("CSV Parse Warnings:",t.errors),t.data.filter(e=>e.Buchungstag&&e.Betrag).map(e=>{var t;let s=(t=e.Betrag)&&parseFloat(t.trim().replace(/\./g,"").replace(",","."))||0,a=e.Verwendungszweck||"",r=e.Buchungstext||"",n=e["Beguenstigter/Zahlungspflichtiger"]||"";return{date:function(e){let t=e.trim().split(".");if(3!==t.length)return e;let[s,a,r]=t;return"".concat(r,"-").concat(a.padStart(2,"0"),"-").concat(s.padStart(2,"0"))}(e.Buchungstag),amount:Math.abs(s),description:a||r,recipient:n,is_income:s>0}})}(a);if(0===r.length){g("Keine Transaktionen in der CSV-Datei gefunden. Stimmt das Format?");return}n(r);let l=new Map;r.forEach((t,s)=>{let a=function(e,t,s){let a="".concat(e," ").concat(t).toLowerCase();for(let e of j)for(let t of e.keywords)if(a.includes(t.toLowerCase()))return e.categoryName;return null}(t.description,t.recipient,t.amount);if(a){let t=e.find(e=>e.name===a);t&&l.set(s,t.id)}}),d(l)}catch(e){g("Fehler beim Parsen der CSV-Datei. Bitte \xfcberpr\xfcfe das Format."),console.error(e)}},s.readAsText(t,"ISO-8859-1")}async function D(){o(!0),g(null);try{let e=s.map((e,t)=>({date:e.date,amount:e.amount,description:e.description,recipient:e.recipient,is_income:e.is_income,category_id:l.get(t)||null})),t=0;for(let s=0;s<e.length;s+=50){let a=e.slice(s,s+50),{error:r}=await b.from("transactions").insert(a);if(r)throw r;t+=a.length}h(t),m(!0),n([])}catch(e){g("Import fehlgeschlagen: ".concat(e.message))}finally{o(!1)}}(0,r.useEffect)(()=>{y()},[]);let C=l.size,S=s.length,z=s.filter(e=>e.is_income).length,_=s.filter(e=>!e.is_income).length,M=s.filter(e=>e.is_income).reduce((e,t)=>e+t.amount,0),T=s.filter(e=>!e.is_income).reduce((e,t)=>e+t.amount,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"CSV Import"}),(0,a.jsx)("p",{className:"text-dark-400",children:"Lade deinen Sparkasse Kontoauszug hoch (CSV-Datei). Die Transaktionen werden automatisch geparst und kategorisiert."}),0===s.length&&(0,a.jsxs)("div",{onDragOver:e=>{e.preventDefault(),k(!0)},onDragLeave:()=>k(!1),onDrop:function(e){e.preventDefault(),k(!1);let t=e.dataTransfer.files[0];t&&w(t)},onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},className:"\n            glass rounded-2xl p-12 border-2 border-dashed cursor-pointer\n            flex flex-col items-center justify-center gap-4\n            transition-all duration-300\n            ".concat(N?"border-emerald-400 bg-emerald-500/5":"border-dark-600 hover:border-dark-400 hover:bg-dark-800/50","\n          "),children:[(0,a.jsx)("div",{className:"p-4 rounded-2xl ".concat(N?"bg-emerald-500/15":"bg-dark-700"),children:(0,a.jsx)(c.Z,{size:32,className:N?"text-emerald-400":"text-dark-400"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-medium text-dark-200",children:"CSV-Datei hier ablegen"}),(0,a.jsx)("p",{className:"text-sm text-dark-400 mt-1",children:"oder klicken zum Ausw\xe4hlen • Sparkasse Format (Semikolon-getrennt)"})]}),(0,a.jsx)("input",{ref:v,type:"file",accept:".csv,.CSV",onChange:function(e){var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&w(s)},className:"hidden"})]}),p&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:[(0,a.jsx)(W.Z,{size:20,className:"text-red-400 flex-shrink-0"}),(0,a.jsx)("p",{className:"text-sm text-red-300",children:p})]}),x&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:[(0,a.jsx)(R.Z,{size:20,className:"text-emerald-400 flex-shrink-0"}),(0,a.jsxs)("p",{className:"text-sm text-emerald-300",children:[u," Transaktionen erfolgreich importiert! \uD83C\uDF89"]})]}),s.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-dark-100",children:S}),(0,a.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Transaktionen"})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:f(M)}),(0,a.jsxs)("p",{className:"text-xs text-dark-400 mt-1",children:[z," Einnahmen"]})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:f(T)}),(0,a.jsxs)("p",{className:"text-xs text-dark-400 mt-1",children:[_," Ausgaben"]})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-4 text-center",children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-cyan-400",children:[Math.round(C/S*100),"%"]}),(0,a.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Kategorisiert"})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-2 px-4 py-3 bg-dark-800/60 border-b border-dark-700/50 text-xs font-semibold text-dark-400 uppercase tracking-wider",children:[(0,a.jsx)("div",{className:"col-span-2",children:"Datum"}),(0,a.jsx)("div",{className:"col-span-3",children:"Empf\xe4nger"}),(0,a.jsx)("div",{className:"col-span-3",children:"Beschreibung"}),(0,a.jsx)("div",{className:"col-span-2",children:"Kategorie"}),(0,a.jsx)("div",{className:"col-span-2 text-right",children:"Betrag"})]}),(0,a.jsx)("div",{className:"divide-y divide-dark-700/30 max-h-[500px] overflow-y-auto",children:s.map((t,s)=>{let r=l.get(s);return e.find(e=>e.id===r),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-12 gap-2 px-4 py-3 hover:bg-dark-700/30 items-center",children:[(0,a.jsx)("div",{className:"sm:col-span-2 text-sm text-dark-300",children:new Date(t.date).toLocaleDateString("de-DE")}),(0,a.jsx)("div",{className:"sm:col-span-3 text-sm font-medium text-dark-100 truncate",children:t.recipient||"—"}),(0,a.jsx)("div",{className:"sm:col-span-3 text-sm text-dark-400 truncate",children:t.description||"—"}),(0,a.jsx)("div",{className:"sm:col-span-2",children:(0,a.jsxs)("select",{value:r||"",onChange:e=>(function(e,t){let s=new Map(l);t?s.set(e,t):s.delete(e),d(s)})(s,e.target.value),className:"w-full px-2 py-1.5 bg-dark-700 border border-dark-600 rounded-lg text-xs text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50",children:[(0,a.jsx)("option",{value:"",children:"— Keine —"}),e.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.icon," ",e.name]},e.id))]})}),(0,a.jsxs)("div",{className:"sm:col-span-2 text-sm font-bold text-right ".concat(t.is_income?"text-emerald-400":"text-red-400"),children:[t.is_income?"+":"-",f(t.amount)]})]},s)})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("button",{onClick:()=>{n([]),d(new Map)},className:"px-4 py-2.5 bg-dark-700 hover:bg-dark-600 rounded-xl text-sm font-medium text-dark-300",children:"Abbrechen"}),(0,a.jsx)("button",{onClick:D,disabled:i,className:"flex items-center gap-2 px-6 py-2.5 bg-emerald-500 hover:bg-emerald-600 disabled:opacity-50 text-white rounded-xl text-sm font-bold shadow-lg shadow-emerald-500/25",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(J.Z,{size:16,className:"animate-spin"}),"Importiere..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.Z,{size:16}),S," Transaktionen importieren"]})})]})]})]})}var H=s(70699),Q=s(77731);let X=["\uD83C\uDFE0","\uD83D\uDED2","\uD83D\uDC55","\uD83D\uDE97","\uD83C\uDF55","\uD83D\uDCF1","\uD83D\uDC8A","\uD83C\uDFAE","\uD83C\uDF81","\uD83D\uDCE6","\uD83D\uDCB0","\uD83D\uDCBB","\uD83D\uDCC8","\uD83C\uDFB5","\uD83D\uDCDA","✈️","\uD83C\uDFCB️","\uD83D\uDC15","\uD83D\uDC87","\uD83D\uDD27","\uD83C\uDF93","\uD83C\uDFEA"],ee=["#EF4444","#F59E0B","#8B5CF6","#3B82F6","#EC4899","#6366F1","#10B981","#F97316","#14B8A6","#6B7280","#22C55E","#06B6D4","#84CC16","#A855F7","#FB923C"];function et(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,d]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[o,x]=(0,r.useState)({name:"",icon:"\uD83D\uDCE6",color:"#6B7280",monthly_budget:0,type:"expense"});async function m(){n(!0);let{data:e}=await b.from("categories").select("*").order("sort_order");e&&t(e),n(!1)}async function h(){if(o.name.trim()){if(l)await b.from("categories").update({name:o.name,icon:o.icon,color:o.color,monthly_budget:o.monthly_budget,type:o.type}).eq("id",l);else{let t=Math.max(0,...e.map(e=>e.sort_order));await b.from("categories").insert({name:o.name,icon:o.icon,color:o.color,monthly_budget:o.monthly_budget,type:o.type,sort_order:t+1})}d(null),c(!1),m()}}async function p(e){confirm('Kategorie wirklich l\xf6schen? Transaktionen werden auf "Unkategorisiert" gesetzt.')&&(await b.from("categories").delete().eq("id",e),m())}if((0,r.useEffect)(()=>{m()},[]),s)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})});let g=()=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>x({...o,name:e.target.value}),placeholder:"Kategorie-Name",className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Monatsbudget (€)"}),(0,a.jsx)("input",{type:"number",step:"10",value:o.monthly_budget,onChange:e=>x({...o,monthly_budget:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-2",children:"Icon"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:X.map(e=>(0,a.jsx)("button",{onClick:()=>x({...o,icon:e}),className:"w-10 h-10 rounded-xl text-lg flex items-center justify-center ".concat(o.icon===e?"bg-emerald-500/20 border-2 border-emerald-500":"bg-dark-700 border border-dark-600 hover:border-dark-500"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-2",children:"Farbe"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:ee.map(e=>(0,a.jsx)("button",{onClick:()=>x({...o,color:e}),className:"w-8 h-8 rounded-full ".concat(o.color===e?"ring-2 ring-offset-2 ring-offset-dark-800 ring-white":""),style:{backgroundColor:e}},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-2",children:"Typ"}),(0,a.jsx)("div",{className:"flex gap-2",children:["expense","income","both"].map(e=>(0,a.jsx)("button",{onClick:()=>x({...o,type:e}),className:"px-4 py-2 rounded-xl text-sm font-medium ".concat(o.type===e?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-dark-700 text-dark-400 border border-dark-600 hover:border-dark-500"),children:"expense"===e?"\uD83D\uDCB8 Ausgabe":"income"===e?"\uD83D\uDCB0 Einnahme":"↔️ Beides"},e))})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsxs)("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-sm font-medium",children:[(0,a.jsx)(H.Z,{size:14}),"Speichern"]}),(0,a.jsxs)("button",{onClick:()=>{d(null),c(!1)},className:"flex items-center gap-2 px-4 py-2 bg-dark-700 hover:bg-dark-600 text-dark-300 rounded-xl text-sm font-medium",children:[(0,a.jsx)(u.Z,{size:14}),"Abbrechen"]})]})]});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Kategorien"}),(0,a.jsxs)("button",{onClick:function(){c(!0),d(null),x({name:"",icon:"\uD83D\uDCE6",color:"#6B7280",monthly_budget:0,type:"expense"})},className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-sm font-medium",children:[(0,a.jsx)(L.Z,{size:16}),"Neue Kategorie"]})]}),i&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Neue Kategorie"}),(0,a.jsx)(g,{})]}),(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("div",{className:"glass rounded-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-xl",style:{backgroundColor:e.color+"20"},children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-dark-100",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-dark-400",children:["income"===e.type?"Einnahme":"both"===e.type?"Beides":"Ausgabe",e.monthly_budget>0&&(0,a.jsxs)("span",{className:"ml-2",children:["\xb7 Budget: ",f(e.monthly_budget),"/Mo"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsx)("button",{onClick:()=>{d(e.id),x({name:e.name,icon:e.icon,color:e.color,monthly_budget:e.monthly_budget,type:e.type}),c(!1)},className:"p-2 rounded-lg text-dark-400 hover:text-dark-100 hover:bg-dark-700",children:(0,a.jsx)(Q.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>p(e.id),className:"p-2 rounded-lg text-dark-400 hover:text-red-400 hover:bg-red-500/10",children:(0,a.jsx)(G.Z,{size:16})})]})]}),l===e.id&&(0,a.jsx)("div",{className:"border-t border-dark-700/50 p-4 bg-dark-800/50",children:(0,a.jsx)(g,{})})]},e.id))})]})}var es=s(61524),ea=s(57976);function er(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[l,d]=(0,r.useState)(()=>{let e=new Date;return{month:e.getMonth(),year:e.getFullYear()}}),[i,c]=(0,r.useState)(!0);async function o(){c(!0);let e=new Date(l.year,l.month,1),s=new Date(l.year,l.month+1,0),[a,r]=await Promise.all([b.from("transactions").select("*, category:categories(*)").eq("is_income",!1).gte("date",e.toISOString().split("T")[0]).lte("date",s.toISOString().split("T")[0]),b.from("categories").select("*").eq("type","expense").order("sort_order")]);a.data&&t(a.data),r.data&&n(r.data),c(!1)}(0,r.useEffect)(()=>{o()},[l]);let x=(0,r.useMemo)(()=>s.filter(e=>e.monthly_budget>0).map(t=>{let s=e.filter(e=>e.category_id===t.id).reduce((e,t)=>e+Number(t.amount),0),a=Math.min(Math.round(s/t.monthly_budget*100),100),r=t.monthly_budget-s,n=s>t.monthly_budget;return{...t,spent:s,percentage:a,remaining:r,isOver:n,overAmount:n?s-t.monthly_budget:0}}).sort((e,t)=>t.percentage-e.percentage),[e,s]),m=x.reduce((e,t)=>e+t.monthly_budget,0),u=x.reduce((e,t)=>e+t.spent,0),h=m>0?Math.round(u/m*100):0;return i?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Budget-\xdcbersicht"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:function(){d(e=>0===e.month?{month:11,year:e.year-1}:{...e,month:e.month-1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,a.jsx)(k.Z,{size:20})}),(0,a.jsxs)("span",{className:"text-lg font-semibold min-w-[180px] text-center",children:[N(l.month)," ",l.year]}),(0,a.jsx)("button",{onClick:function(){d(e=>11===e.month?{month:0,year:e.year+1}:{...e,month:e.month+1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,a.jsx)(v.Z,{size:20})})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Gesamtbudget"}),(0,a.jsxs)("p",{className:"text-sm text-dark-400",children:[f(u)," von ",f(m)," verbraucht"]})]}),(0,a.jsxs)("span",{className:"text-3xl font-bold ".concat(h>100?"text-red-400":h>80?"text-amber-400":"text-emerald-400"),children:[h,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-4 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-700 ease-out ".concat(h>100?"bg-red-500":h>80?"bg-amber-500":"bg-emerald-500"),style:{width:"".concat(Math.min(h,100),"%")}})})]}),0===x.length?(0,a.jsxs)("div",{className:"glass rounded-2xl p-12 text-center",children:[(0,a.jsx)("p",{className:"text-dark-400 text-lg",children:"Kein Budget gesetzt"}),(0,a.jsx)("p",{className:"text-dark-500 text-sm mt-2",children:"Gehe zu Kategorien und setze ein Monatsbudget f\xfcr deine Ausgaben-Kategorien."})]}):(0,a.jsx)("div",{className:"space-y-4",children:x.map(e=>(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-lg",style:{backgroundColor:e.color+"20"},children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-dark-100",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-dark-400",children:[f(e.spent)," / ",f(e.monthly_budget)]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[e.isOver?(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-red-400",children:[(0,a.jsx)(es.Z,{size:16}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:["+",f(e.overAmount)]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-emerald-400",children:[(0,a.jsx)(ea.Z,{size:16}),(0,a.jsxs)("span",{className:"text-sm font-bold",children:[f(e.remaining)," \xfcbrig"]})]}),(0,a.jsxs)("p",{className:"text-xs text-dark-500 mt-0.5",children:[e.percentage,"%"]})]})]}),(0,a.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-2.5 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-700 ease-out",style:{width:"".concat(Math.min(e.percentage,100),"%"),backgroundColor:e.isOver?"#EF4444":e.percentage>80?"#F59E0B":e.color}})})]},e.id))})]})}var en=s(15570);function el(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,d]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[o,m]=(0,r.useState)({name:"",target_amount:"",current_amount:"",deadline:""});async function h(){n(!0);let{data:e}=await b.from("savings_goals").select("*").order("created_at",{ascending:!1});e&&t(e),n(!1)}async function p(){if(!o.name||!o.target_amount)return;let e={name:o.name,target_amount:parseFloat(o.target_amount),current_amount:parseFloat(o.current_amount)||0,deadline:o.deadline||null};l?await b.from("savings_goals").update(e).eq("id",l):await b.from("savings_goals").insert(e),d(null),c(!1),h()}async function g(e){confirm("Sparziel wirklich l\xf6schen?")&&(await b.from("savings_goals").delete().eq("id",e),h())}async function j(t,s){let a=e.find(e=>e.id===t);if(!a)return;let r=Math.max(0,Number(a.current_amount)+s);await b.from("savings_goals").update({current_amount:r}).eq("id",t),h()}return(0,r.useEffect)(()=>{h()},[]),s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Sparziele"}),(0,a.jsxs)("button",{onClick:function(){c(!0),d(null),m({name:"",target_amount:"",current_amount:"0",deadline:""})},className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-sm font-medium",children:[(0,a.jsx)(L.Z,{size:16}),"Neues Ziel"]})]}),i&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Neues Sparziel"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",placeholder:"z.B. Notgroschen",value:o.name,onChange:e=>m({...o,name:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Zielbetrag (€)"}),(0,a.jsx)("input",{type:"number",step:"100",placeholder:"5000",value:o.target_amount,onChange:e=>m({...o,target_amount:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Aktuell gespart (€)"}),(0,a.jsx)("input",{type:"number",step:"10",placeholder:"0",value:o.current_amount,onChange:e=>m({...o,current_amount:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-dark-400 mb-1",children:"Deadline (optional)"}),(0,a.jsx)("input",{type:"date",value:o.deadline,onChange:e=>m({...o,deadline:e.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl text-sm font-medium",children:[(0,a.jsx)(H.Z,{size:14})," Speichern"]}),(0,a.jsxs)("button",{onClick:()=>c(!1),className:"flex items-center gap-2 px-4 py-2 bg-dark-700 hover:bg-dark-600 text-dark-300 rounded-xl text-sm font-medium",children:[(0,a.jsx)(u.Z,{size:14})," Abbrechen"]})]})]}),0!==e.length||i?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(e=>{let t=Math.min(Math.round(Number(e.current_amount)/Number(e.target_amount)*100),100),s=Number(e.current_amount)>=Number(e.target_amount),r=null;e.deadline&&(r=Math.ceil((new Date(e.deadline).getTime()-Date.now())/864e5));let n=null;if(e.deadline&&!s){let t=Math.max(1,(r||30)/30);n=(Number(e.target_amount)-Number(e.current_amount))/t}return(0,a.jsx)("div",{className:"glass rounded-2xl p-6 space-y-4",children:l===e.id?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>m({...o,name:e.target.value}),className:"col-span-2 px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),(0,a.jsx)("input",{type:"number",value:o.target_amount,onChange:e=>m({...o,target_amount:e.target.value}),placeholder:"Zielbetrag",className:"px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),(0,a.jsx)("input",{type:"number",value:o.current_amount,onChange:e=>m({...o,current_amount:e.target.value}),placeholder:"Aktuell",className:"px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"}),(0,a.jsx)("input",{type:"date",value:o.deadline,onChange:e=>m({...o,deadline:e.target.value}),className:"col-span-2 px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl text-sm text-dark-100 focus:outline-none focus:ring-2 focus:ring-emerald-500/50"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:p,className:"px-3 py-1.5 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg text-sm",children:(0,a.jsx)(H.Z,{size:14})}),(0,a.jsx)("button",{onClick:()=>d(null),className:"px-3 py-1.5 bg-dark-700 hover:bg-dark-600 text-dark-300 rounded-lg text-sm",children:(0,a.jsx)(u.Z,{size:14})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-bold text-dark-100",children:[s?"\uD83C\uDF89":"\uD83C\uDFAF"," ",e.name]}),e.deadline&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mt-1 text-sm text-dark-400",children:[(0,a.jsx)(en.Z,{size:14}),(0,a.jsxs)("span",{children:[new Date(e.deadline).toLocaleDateString("de-DE"),null!==r&&(0,a.jsxs)("span",{className:r<0?"text-red-400":r<30?"text-amber-400":"",children:[" ","(",r<0?"".concat(Math.abs(r)," Tage \xfcberf\xe4llig"):"".concat(r," Tage \xfcbrig"),")"]})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>{d(e.id),m({name:e.name,target_amount:String(e.target_amount),current_amount:String(e.current_amount),deadline:e.deadline||""}),c(!1)},className:"p-1.5 rounded-lg text-dark-400 hover:text-dark-200 hover:bg-dark-700",children:(0,a.jsx)(Q.Z,{size:14})}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-1.5 rounded-lg text-dark-400 hover:text-red-400 hover:bg-red-500/10",children:(0,a.jsx)(G.Z,{size:14})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,a.jsx)("span",{className:"text-dark-300",children:f(Number(e.current_amount))}),(0,a.jsx)("span",{className:"text-dark-400",children:f(Number(e.target_amount))})]}),(0,a.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all duration-700 ease-out ".concat(s?"bg-emerald-500":"bg-cyan-500"),style:{width:"".concat(t,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,a.jsxs)("span",{className:"text-sm font-bold ".concat(s?"text-emerald-400":"text-cyan-400"),children:[t,"%"]}),null!==n&&(0,a.jsxs)("span",{className:"text-xs text-dark-400",children:["~",f(n),"/Monat n\xf6tig"]})]})]}),(0,a.jsx)("div",{className:"flex gap-2 pt-1",children:[10,50,100,500].map(t=>(0,a.jsxs)("button",{onClick:()=>j(e.id,t),className:"flex-1 py-1.5 bg-dark-700 hover:bg-emerald-500/20 hover:text-emerald-400 rounded-lg text-xs font-medium text-dark-300 border border-dark-600 hover:border-emerald-500/30",children:["+",t,"€"]},t))})]})},e.id)})}):(0,a.jsxs)("div",{className:"glass rounded-2xl p-12 text-center",children:[(0,a.jsx)(x.Z,{size:48,className:"mx-auto text-dark-500 mb-4"}),(0,a.jsx)("p",{className:"text-dark-400 text-lg",children:"Noch keine Sparziele"}),(0,a.jsx)("p",{className:"text-dark-500 text-sm mt-2",children:"Erstelle dein erstes Sparziel!"})]})]})}var ed=s(28814),ei=s(94688);function ec(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[l,d]=(0,r.useState)(20),[i,c]=(0,r.useState)(500);async function o(){n(!0);let e=new Date;e.setMonth(e.getMonth()-12);let{data:s}=await b.from("transactions").select("*").gte("date",e.toISOString().split("T")[0]).order("date",{ascending:!0});s&&t(s),n(!1)}(0,r.useEffect)(()=>{o()},[]);let x=(0,r.useMemo)(()=>{let t=new Map;e.forEach(e=>{let s=new Date(e.date),a="".concat(s.getFullYear(),"-").concat(String(s.getMonth()+1).padStart(2,"0")),r=t.get(a)||{expenses:0,income:0};e.is_income?r.income+=Number(e.amount):r.expenses+=Number(e.amount),t.set(a,r)});let s=Array.from(t.entries()).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}).map(e=>{let[t,s]=e,[a,r]=t.split("-");return{key:t,label:"".concat(N(parseInt(r)-1).slice(0,3)," ").concat(a.slice(2)),...s}});if(0===s.length)return null;let a=s.reduce((e,t)=>e+t.expenses,0),r=s.reduce((e,t)=>e+t.income,0),n=a/s.length,d=r/s.length,c=Math.max(...s.map(e=>e.expenses)),o=Math.min(...s.map(e=>e.expenses)),x=n*(1+l/100),m=x+i;return{months:s,avgExpenses:n,avgIncome:d,maxExpenses:c,minExpenses:o,withBuffer:x,withSavings:m,estimatedBrutto:1.45*m,monthCount:s.length}},[e,l,i]);return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):x&&0!==x.months.length?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gehaltsrechner"}),(0,a.jsxs)("p",{className:"text-dark-400",children:["Basierend auf deinen Ausgaben der letzten ",x.monthCount," Monate — was sollte dein fixes Gehalt sein?"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-dark-400",children:[(0,a.jsx)(y.Z,{size:18}),(0,a.jsx)("span",{className:"text-sm",children:"\xd8 Ausgaben/Monat"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:f(x.avgExpenses)}),(0,a.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:["Min: ",f(x.minExpenses)," \xb7 Max: ",f(x.maxExpenses)]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-dark-400",children:[(0,a.jsx)(m.Z,{size:18}),(0,a.jsx)("span",{className:"text-sm",children:"Empfohlenes Netto"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-emerald-400",children:f(x.withSavings)}),(0,a.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:["Ausgaben + ",l,"% Puffer + ",f(i)," Sparen"]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-dark-400",children:[(0,a.jsx)(ed.Z,{size:18}),(0,a.jsx)("span",{className:"text-sm",children:"Gesch\xe4tztes Brutto"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-cyan-400",children:f(x.estimatedBrutto)}),(0,a.jsx)("p",{className:"text-xs text-dark-500 mt-1",children:"~45% Abz\xfcge (Steuern, SV)"})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6 space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Anpassen"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm text-dark-300",children:"Sicherheits-Puffer"}),(0,a.jsxs)("span",{className:"text-sm font-bold text-emerald-400",children:[l,"%"]})]}),(0,a.jsx)("input",{type:"range",min:0,max:50,step:5,value:l,onChange:e=>d(parseInt(e.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-dark-500 mt-1",children:[(0,a.jsx)("span",{children:"0%"}),(0,a.jsx)("span",{children:"25%"}),(0,a.jsx)("span",{children:"50%"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm text-dark-300",children:"Monatliches Sparziel"}),(0,a.jsx)("span",{className:"text-sm font-bold text-cyan-400",children:f(i)})]}),(0,a.jsx)("input",{type:"range",min:0,max:2e3,step:50,value:i,onChange:e=>c(parseInt(e.target.value)),className:"w-full h-2 bg-dark-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-dark-500 mt-1",children:[(0,a.jsx)("span",{children:"0€"}),(0,a.jsx)("span",{children:"1.000€"}),(0,a.jsx)("span",{children:"2.000€"})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Gehalts-Aufschl\xfcsselung"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"text-dark-300",children:"\xd8 Monatliche Ausgaben"}),(0,a.jsx)("span",{className:"font-bold text-dark-100",children:f(x.avgExpenses)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-t border-dark-700/50",children:[(0,a.jsxs)("span",{className:"text-dark-300",children:["+ Sicherheitspuffer (",l,"%)"]}),(0,a.jsxs)("span",{className:"font-bold text-amber-400",children:["+",f(x.avgExpenses*l/100)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-t border-dark-700/50",children:[(0,a.jsx)("span",{className:"text-dark-300",children:"+ Monatliches Sparen"}),(0,a.jsxs)("span",{className:"font-bold text-cyan-400",children:["+",f(i)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-t-2 border-emerald-500/30 bg-emerald-500/5 rounded-xl px-4 -mx-4",children:[(0,a.jsx)("span",{className:"text-emerald-400 font-semibold",children:"= Mindest-Netto pro Monat"}),(0,a.jsx)("span",{className:"text-xl font-bold text-emerald-400",children:f(x.withSavings)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 bg-cyan-500/5 rounded-xl px-4 -mx-4",children:[(0,a.jsx)("span",{className:"text-cyan-400 font-semibold",children:"≈ Brutto (gesch\xe4tzt)"}),(0,a.jsx)("span",{className:"text-xl font-bold text-cyan-400",children:f(x.estimatedBrutto)})]})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Ausgaben pro Monat"}),(0,a.jsx)(z.h,{width:"100%",height:300,children:(0,a.jsxs)(B.v,{data:x.months,children:[(0,a.jsx)(Z.K,{dataKey:"label",tick:{fill:"#94a3b8",fontSize:12},axisLine:!1,tickLine:!1}),(0,a.jsx)(A.B,{tick:{fill:"#64748b",fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k")}),(0,a.jsx)(F.u,{content:(0,a.jsx)(e=>{let{active:t,payload:s,label:r}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-200 mb-1",children:r}),s.map((e,t)=>(0,a.jsxs)("p",{className:"text-sm",style:{color:e.fill||e.color},children:[e.name,": ",f(e.value)]},t))]}):null},{})}),(0,a.jsx)(ei.d,{y:x.avgExpenses,stroke:"#F59E0B",strokeDasharray:"5 5",label:{value:"\xd8",fill:"#F59E0B",position:"right"}}),(0,a.jsx)(K.$,{dataKey:"expenses",name:"Ausgaben",fill:"#EF4444",radius:[6,6,0,0],barSize:24}),(0,a.jsx)(K.$,{dataKey:"income",name:"Einnahmen",fill:"#22C55E",radius:[6,6,0,0],barSize:24})]})})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\uD83D\uDCA1 Tipps"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-dark-300",children:[(0,a.jsxs)("p",{children:["• Als Unternehmer solltest du mindestens ",(0,a.jsx)("strong",{className:"text-dark-100",children:"3 Monatsgeh\xe4lter"})," als Notgroschen haben."]}),(0,a.jsx)("p",{children:"• Zahle dir ein festes Gehalt aus — auch wenn Einnahmen schwanken. Das schafft Struktur."}),(0,a.jsxs)("p",{children:["• Das gesch\xe4tzte Brutto ist ein ",(0,a.jsx)("strong",{className:"text-dark-100",children:"grober Richtwert"}),". Dein tats\xe4chlicher Steuersatz h\xe4ngt von vielen Faktoren ab."]}),(0,a.jsxs)("p",{children:["• Regel: ",(0,a.jsx)("strong",{className:"text-dark-100",children:"50/30/20"})," — 50% Fixkosten, 30% Lifestyle, 20% Sparen/Investieren."]})]})]})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Gehaltsrechner"}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-12 text-center",children:[(0,a.jsx)(m.Z,{size:48,className:"mx-auto text-dark-500 mb-4"}),(0,a.jsx)("p",{className:"text-dark-400 text-lg",children:"Nicht genug Daten"}),(0,a.jsx)("p",{className:"text-dark-500 text-sm mt-2",children:"Importiere zuerst deine Kontoausz\xfcge, damit ich dein ideales Gehalt berechnen kann."})]})]})}var eo=s(75495),ex=s(86185);let em=["miete","mietvertrag","kaltmiete","warmmiete","nebenkosten","hausverwaltung","wohnungsbau","versicherung","haftpflicht","krankenversicherung","allianz","huk","ergo","spotify","netflix","disney","amazon prime","apple","icloud","google storage","youtube premium","crunchyroll","chatgpt","openai","notion","figma","adobe","microsoft","github","vercel","hetzner","digitalocean","cloudflare","fitnessstudio","mcfit","gym","john reed","fitness","urban sports","deutschlandticket","mvv","bahncard","telekom","vodafone","o2","1&1","congstar","mobilfunk","internet","dsl","strom","gas","stadtwerke","energie","swm","dauerauftrag","lastschrift","monatlich"],eu=["spotify","netflix","disney","amazon prime","youtube premium","crunchyroll","chatgpt","openai","notion","figma","adobe","github","vercel","hetzner","digitalocean","cloudflare","mcfit","gym","john reed","urban sports","fitness"];function eh(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0);async function l(){n(!0);let e=new Date;e.setMonth(e.getMonth()-3);let{data:s}=await b.from("transactions").select("*, category:categories(*)").eq("is_income",!1).gte("date",e.toISOString().split("T")[0]).order("date",{ascending:!1});s&&t(s),n(!1)}(0,r.useEffect)(()=>{l()},[]);let i=(0,r.useMemo)(()=>{let t=new Map;e.forEach(e=>{let s=(e.recipient||e.description||"Unbekannt").toLowerCase().trim(),a=t.get(s)||[];a.push(e),t.set(s,a)});let s=[],a=[];t.forEach((e,t)=>{let r=em.some(e=>t.includes(e))||e.length>=2,n=t.toLowerCase();if(r&&e.length>=1){let r=em.some(e=>n.includes(e)),l=e.map(e=>Number(e.amount)),d=l.reduce((e,t)=>e+t,0)/l.length,i=l.every(e=>Math.abs(e-d)/d<.15);if(r||e.length>=2&&i){let a=e[0].category,r=eu.some(e=>n.includes(e)),l=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),d=Number(l[0].amount),i=e[0].recipient||e[0].description||t;s.push({name:i,amount:d,category:(null==a?void 0:a.name)||"Unkategorisiert",categoryIcon:(null==a?void 0:a.icon)||"❓",categoryColor:(null==a?void 0:a.color)||"#6B7280",isCancellable:r,transactions:l})}else a.push(...e)}else a.push(...e)}),s.sort((e,t)=>t.amount-e.amount);let r=s.reduce((e,t)=>e+t.amount,0),n=s.filter(e=>e.isCancellable).reduce((e,t)=>e+t.amount,0),l=a.reduce((e,t)=>e+Number(t.amount),0)/3,d=new Map;s.forEach(e=>{let t=e.category,s=d.get(t);s?s.total+=e.amount:d.set(t,{name:e.category,icon:e.categoryIcon,color:e.categoryColor,total:e.amount})});let i=Array.from(d.values()).sort((e,t)=>t.total-e.total);return{fixedCosts:s,totalFixed:r,totalCancellable:n,totalVariable:l,fixedCount:s.length,cancellableCount:s.filter(e=>e.isCancellable).length,categoryBreakdown:i}},[e]);return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-dark-50",children:"Fixkosten"}),(0,a.jsx)("p",{className:"text-dark-400 mt-1",children:"Das geht jeden Monat raus — automatisch erkannt aus deinen Transaktionen"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-red-500/15",children:(0,a.jsx)(d.Z,{size:20,className:"text-red-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Fixkosten/Monat"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:f(i.totalFixed)}),(0,a.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[i.fixedCount," wiederkehrende Posten"]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-amber-500/15",children:(0,a.jsx)(eo.Z,{size:20,className:"text-amber-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"K\xfcndbar"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-amber-400",children:f(i.totalCancellable)}),(0,a.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[i.cancellableCount," optionale Abos"]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-cyan-500/15",children:(0,a.jsx)(w.Z,{size:20,className:"text-cyan-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"\xd8 Variable Kosten"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-cyan-400",children:f(i.totalVariable)}),(0,a.jsx)("p",{className:"text-xs text-dark-500 mt-1",children:"pro Monat (\xd8 3 Monate)"})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"p-2.5 rounded-xl bg-purple-500/15",children:(0,a.jsx)(D.Z,{size:20,className:"text-purple-400"})}),(0,a.jsx)("span",{className:"text-sm text-dark-400",children:"Fix vs. Variabel"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-400",children:[i.totalFixed+i.totalVariable>0?(i.totalFixed/(i.totalFixed+i.totalVariable)*100).toFixed(0):0,"% fix"]}),(0,a.jsxs)("p",{className:"text-xs text-dark-500 mt-1",children:[f(i.totalFixed+i.totalVariable)," gesamt"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.categoryBreakdown.length>0&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(ex.Z,{size:20,className:"text-dark-400"}),"Fixkosten nach Kategorie"]}),(0,a.jsx)(z.h,{width:"100%",height:300,children:(0,a.jsxs)(_.u,{children:[(0,a.jsx)(M.b,{data:i.categoryBreakdown,cx:"50%",cy:"50%",innerRadius:55,outerRadius:100,paddingAngle:3,dataKey:"total",nameKey:"name",children:i.categoryBreakdown.map((e,t)=>(0,a.jsx)(T.b,{fill:e.color,stroke:"transparent"},"cell-".concat(t)))}),(0,a.jsx)(F.u,{content:(0,a.jsx)(e=>{let{active:t,payload:s}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-dark-100",children:[s[0].payload.icon," ",s[0].payload.name]}),(0,a.jsxs)("p",{className:"text-sm text-emerald-400 font-bold",children:[f(s[0].value),"/Monat"]})]}):null},{})}),(0,a.jsx)(E.D,{formatter:e=>(0,a.jsx)("span",{className:"text-dark-300 text-sm",children:e})})]})})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[(0,a.jsx)(eo.Z,{size:20,className:"text-amber-400"}),"Das k\xf6nntest du k\xfcndigen"]}),(0,a.jsxs)("p",{className:"text-sm text-dark-400 mb-4",children:["Optionale Abos & Subscriptions — ",f(i.totalCancellable),"/Monat = ",f(12*i.totalCancellable),"/Jahr"]}),0===i.fixedCosts.filter(e=>e.isCancellable).length?(0,a.jsxs)("div",{className:"flex items-center gap-3 py-6 text-dark-400 justify-center",children:[(0,a.jsx)(ea.Z,{size:24,className:"text-emerald-400"}),(0,a.jsx)("span",{children:"Keine k\xfcndbaren Abos erkannt"})]}):(0,a.jsx)("div",{className:"space-y-2",children:i.fixedCosts.filter(e=>e.isCancellable).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-amber-500/5 border border-amber-500/10 hover:border-amber-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-lg",children:e.categoryIcon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-100",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-dark-400",children:e.category})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-bold text-amber-400",children:[f(e.amount),"/Mo"]}),(0,a.jsxs)("p",{className:"text-xs text-dark-500",children:[f(12*e.amount),"/Jahr"]})]})]},t))})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Alle Fixkosten",(0,a.jsxs)("span",{className:"text-sm text-dark-400 font-normal ml-2",children:["(",i.fixedCount," Posten \xb7 ",f(i.totalFixed),"/Monat)"]})]}),0===i.fixedCosts.length?(0,a.jsxs)("div",{className:"text-center py-12 text-dark-400",children:[(0,a.jsx)(d.Z,{size:48,className:"mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg",children:"Keine Fixkosten erkannt"}),(0,a.jsx)("p",{className:"text-sm text-dark-500 mt-1",children:"Importiere mehr Transaktionsdaten f\xfcr bessere Erkennung"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[i.fixedCosts.map((e,t)=>{let s=i.totalFixed>0?e.amount/i.totalFixed*100:0;return(0,a.jsxs)("div",{className:"flex items-center gap-3 py-3 px-4 rounded-xl hover:bg-dark-700/50 ".concat(e.isCancellable?"border-l-2 border-amber-500/50":""),children:[(0,a.jsx)("span",{className:"text-xl w-8 text-center",children:e.categoryIcon}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-dark-100 truncate",children:e.name}),e.isCancellable&&(0,a.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 bg-amber-500/15 text-amber-400 rounded-full font-medium",children:"k\xfcndbar"})]}),(0,a.jsxs)("span",{className:"text-sm font-bold text-red-400 flex-shrink-0 ml-2",children:[f(e.amount),"/Mo"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-dark-500",children:e.category}),(0,a.jsx)("span",{className:"text-xs text-dark-600",children:"\xb7"}),(0,a.jsxs)("span",{className:"text-xs text-dark-500",children:[f(12*e.amount),"/Jahr"]})]}),(0,a.jsxs)("span",{className:"text-xs text-dark-500",children:[s.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-dark-700 rounded-full h-1.5 mt-1.5 overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full",style:{width:"".concat(s,"%"),backgroundColor:e.categoryColor}})})]})]},t)}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 mt-3 border-t border-dark-700/50 px-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-sm font-bold text-dark-200",children:"Gesamt Fixkosten"}),(0,a.jsxs)("span",{className:"text-xs text-dark-500 ml-2",children:["(",f(12*i.totalFixed),"/Jahr)"]})]}),(0,a.jsxs)("span",{className:"text-lg font-bold text-red-400",children:[f(i.totalFixed),"/Mo"]})]})]})]}),(0,a.jsx)("div",{className:"glass rounded-2xl p-5 border border-dark-600/50",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(es.Z,{size:20,className:"text-amber-400 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-200",children:"Wie erkennt das Tool Fixkosten?"}),(0,a.jsx)("p",{className:"text-xs text-dark-400 mt-1",children:"Wiederkehrende Zahlungen werden anhand von Schl\xfcsselw\xf6rtern (Miete, Spotify, etc.) und Mustern (gleicher Empf\xe4nger, \xe4hnlicher Betrag \xfcber 2+ Monate) erkannt. Mehr Transaktionsdaten = bessere Erkennung."})]})]})})]})}var ep=s(95200),eg=s(85159),eb=s(22071),ej=s(37211),ef=s(66363),eN=s(38333),ek=s(98061);function ev(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[o,x]=(0,r.useState)("month"),[m,u]=(0,r.useState)("amount"),[h,p]=(0,r.useState)("desc"),[g,j]=(0,r.useState)(()=>{let e=new Date;return{month:e.getMonth(),year:e.getFullYear()}});async function D(){d(!0);let e=new Date;e.setMonth(e.getMonth()-6);let[s,a]=await Promise.all([b.from("transactions").select("*, category:categories(*)").gte("date",e.toISOString().split("T")[0]).order("date",{ascending:!1}),b.from("categories").select("*").order("sort_order")]);s.data&&t(s.data),a.data&&n(a.data),d(!1)}(0,r.useEffect)(()=>{D()},[]);let C=(0,r.useMemo)(()=>{let e,t,s,a;let r=new Date;if("week"===o){let n=r.getDay()||7;t=new Date(r),(e=new Date(r)).setDate(r.getDate()-n+1),e.setHours(0,0,0,0),(a=new Date(e)).setDate(a.getDate()-1),(s=new Date(a)).setDate(s.getDate()-6)}else e=new Date(g.year,g.month,1),t=new Date(g.year,g.month+1,0),s=new Date(g.year,g.month-1,1),a=new Date(g.year,g.month,0);return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0],prevStart:s.toISOString().split("T")[0],prevEnd:a.toISOString().split("T")[0],label:"week"===o?"Diese Woche":"".concat(N(g.month)," ").concat(g.year),prevLabel:"week"===o?"Letzte Woche":(()=>{let e=0===g.month?11:g.month-1,t=0===g.month?g.year-1:g.year;return"".concat(N(e)," ").concat(t)})()}},[o,g]),{currentTxs:_,prevTxs:M}=(0,r.useMemo)(()=>({currentTxs:e.filter(e=>{let t=e.date;return t>=C.start&&t<=C.end&&!e.is_income}),prevTxs:e.filter(e=>{let t=e.date;return t>=C.prevStart&&t<=C.prevEnd&&!e.is_income})}),[e,C]),T=(0,r.useMemo)(()=>{let e=new Map;return _.forEach(t=>{let s=t.category,a=(null==s?void 0:s.id)||"uncategorized",r=e.get(a)||{id:a,name:(null==s?void 0:s.name)||"Unkategorisiert",icon:(null==s?void 0:s.icon)||"❓",color:(null==s?void 0:s.color)||"#6B7280",currentTotal:0,prevTotal:0,transactions:[],prevTransactions:[]};r.currentTotal+=Number(t.amount),r.transactions.push(t),e.set(a,r)}),M.forEach(t=>{let s=t.category,a=(null==s?void 0:s.id)||"uncategorized",r=e.get(a)||{id:a,name:(null==s?void 0:s.name)||"Unkategorisiert",icon:(null==s?void 0:s.icon)||"❓",color:(null==s?void 0:s.color)||"#6B7280",currentTotal:0,prevTotal:0,transactions:[],prevTransactions:[]};r.prevTotal+=Number(t.amount),r.prevTransactions.push(t),e.set(a,r)}),Array.from(e.values()).sort((e,t)=>t.currentTotal-e.currentTotal)},[_,M]),E=(0,r.useMemo)(()=>{let e=[];return T.forEach(t=>{if(0===t.currentTotal)return;let s="week"===o?7:new Date(g.year,g.month+1,0).getDate(),a=t.currentTotal/s,r=365*a;if(t.prevTotal>0){let s=(t.currentTotal-t.prevTotal)/t.prevTotal*100;s>30?e.push({text:"".concat(t.icon," ").concat(t.name,": +").concat(s.toFixed(0),"% mehr als ").concat(C.prevLabel," (").concat(f(t.currentTotal)," vs. ").concat(f(t.prevTotal),")"),type:"warning"}):s<-20&&e.push({text:"".concat(t.icon," ").concat(t.name,": ").concat(Math.abs(s).toFixed(0),"% weniger als ").concat(C.prevLabel," — gut gemacht! \uD83D\uDCAA"),type:"success"})}r>500&&e.push({text:"".concat(t.icon," ").concat(t.name,": ~").concat(f(7*a),"/Woche = ~").concat(f(30*a),"/Monat = ~").concat(f(r),"/Jahr"),type:"info"});let n=new Map;t.transactions.forEach(e=>{let t=e.recipient||e.description||"Unbekannt";n.set(t,(n.get(t)||0)+Number(e.amount))}),n.forEach((a,r)=>{if(t.transactions.filter(e=>(e.recipient||e.description)===r).length>=3){let t=a/(s/7);t>10&&e.push({text:"Du gibst ~".concat(f(t),'/Woche f\xfcr "').concat(r,'" aus = ~').concat(f(4.33*t),"/Monat"),type:"info"})}})}),e.slice(0,12)},[T,o,g,C]),B=t=>{let s=new Map;return e.filter(e=>{let s=e.category;return((null==s?void 0:s.id)||"uncategorized")===t&&!e.is_income}).forEach(e=>{let t=new Date(e.date),a="".concat(t.getFullYear(),"-").concat(String(t.getMonth()+1).padStart(2,"0"));s.set(a,(s.get(a)||0)+Number(e.amount))}),Array.from(s.entries()).sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}).map(e=>{let[t,s]=e,[a,r]=t.split("-");return{label:"".concat(N(parseInt(r)-1).slice(0,3)," ").concat(a.slice(2)),total:s}})},K=e=>{let{active:t,payload:s,label:r}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"glass rounded-lg p-3 shadow-xl border border-dark-600",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-200",children:r}),(0,a.jsx)("p",{className:"text-sm text-emerald-400 font-bold",children:f(s[0].value)})]}):null};if(l)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-emerald-500 border-t-transparent"})});let I=_.reduce((e,t)=>e+Number(t.amount),0),L=M.reduce((e,t)=>e+Number(t.amount),0),O=L>0?(I-L)/L*100:0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-dark-50",children:"Deep Dive"}),(0,a.jsx)("p",{className:"text-dark-400 mt-1",children:"Deine Ausgaben im Detail analysiert"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex bg-dark-800 rounded-xl border border-dark-700 overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>x("week"),className:"px-4 py-2 text-sm font-medium ".concat("week"===o?"bg-emerald-500/15 text-emerald-400":"text-dark-400 hover:text-dark-200"),children:"Woche"}),(0,a.jsx)("button",{onClick:()=>x("month"),className:"px-4 py-2 text-sm font-medium ".concat("month"===o?"bg-emerald-500/15 text-emerald-400":"text-dark-400 hover:text-dark-200"),children:"Monat"})]}),"month"===o&&(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:function(){j(e=>0===e.month?{month:11,year:e.year-1}:{...e,month:e.month-1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,a.jsx)(k.Z,{size:18})}),(0,a.jsxs)("span",{className:"text-sm font-medium min-w-[140px] text-center text-dark-200",children:[N(g.month)," ",g.year]}),(0,a.jsx)("button",{onClick:function(){j(e=>11===e.month?{month:0,year:e.year+1}:{...e,month:e.month+1})},className:"p-2 rounded-lg hover:bg-dark-700 text-dark-300 hover:text-dark-100",children:(0,a.jsx)(v.Z,{size:18})})]})]})]}),(0,a.jsx)("div",{className:"glass rounded-2xl p-5",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-dark-400",children:C.label}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-400",children:f(I)})]}),(0,a.jsx)("div",{className:"text-center",children:L>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-bold ".concat(O>0?"bg-red-500/10 text-red-400":"bg-emerald-500/10 text-emerald-400"),children:[O>0?(0,a.jsx)(y.Z,{size:16}):(0,a.jsx)(w.Z,{size:16}),O>0?"+":"",O.toFixed(1),"%"]})}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-dark-400",children:C.prevLabel}),(0,a.jsx)("p",{className:"text-xl font-bold text-dark-300",children:f(L)})]})]})}),E.length>0&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(ep.Z,{size:20,className:"text-amber-400"}),"Spending Insights"]}),(0,a.jsx)("div",{className:"space-y-2",children:E.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 py-2.5 px-4 rounded-xl text-sm ".concat("warning"===e.type?"bg-red-500/5 border border-red-500/10 text-red-300":"success"===e.type?"bg-emerald-500/5 border border-emerald-500/10 text-emerald-300":"bg-cyan-500/5 border border-cyan-500/10 text-cyan-300"),children:[(0,a.jsx)("span",{className:"mt-0.5",children:"warning"===e.type?"⚠️":"success"===e.type?"✅":"\uD83D\uDCA1"}),(0,a.jsx)("span",{children:e.text})]},t))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:function(){"amount"===m?u("date"):(u("amount"),p(e=>"asc"===e?"desc":"asc"))},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-dark-400 hover:text-dark-200 hover:bg-dark-700/50",children:[(0,a.jsx)(S.Z,{size:16}),"Sortieren: ","amount"===m?"Betrag":"Datum"," ","desc"===h?"↓":"↑"]}),(0,a.jsxs)("span",{className:"text-sm text-dark-500",children:[T.length," Kategorien \xb7 ",_.length," Transaktionen"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:T.map(e=>{let t=i===e.id,s=e.prevTotal>0?(e.currentTotal-e.prevTotal)/e.prevTotal*100:null,r=I>0?e.currentTotal/I*100:0,n=B(e.id),l=[...e.transactions].sort((e,t)=>"amount"===m?"desc"===h?Number(t.amount)-Number(e.amount):Number(e.amount)-Number(t.amount):"desc"===h?new Date(t.date).getTime()-new Date(e.date).getTime():new Date(e.date).getTime()-new Date(t.date).getTime()),d="week"===o?7:new Date(g.year,g.month+1,0).getDate(),x=e.currentTotal/d;return(0,a.jsxs)("div",{className:"glass rounded-2xl overflow-hidden",children:[(0,a.jsxs)("button",{onClick:()=>{var t;c(i===(t=e.id)?null:t)},className:"w-full flex items-center justify-between p-5 hover:bg-dark-700/30 text-left",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-xl",style:{backgroundColor:e.color+"20"},children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-dark-100",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-0.5",children:[(0,a.jsxs)("span",{className:"text-xs text-dark-400",children:[e.transactions.length," Transaktionen \xb7 ",r.toFixed(1),"%"]}),null!==s&&(0,a.jsxs)("span",{className:"text-xs font-medium ".concat(s>0?"text-red-400":"text-emerald-400"),children:[s>0?"↑":"↓"," ",Math.abs(s).toFixed(0),"% vs. Vorperiode"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-lg font-bold text-red-400",children:f(e.currentTotal)}),e.prevTotal>0&&(0,a.jsxs)("p",{className:"text-xs text-dark-500",children:["Vorher: ",f(e.prevTotal)]})]}),t?(0,a.jsx)(eg.Z,{size:20,className:"text-dark-400"}):(0,a.jsx)(V.Z,{size:20,className:"text-dark-400"})]})]}),t&&(0,a.jsxs)("div",{className:"border-t border-dark-700/50",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 p-5 bg-dark-800/30",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xs text-dark-500 mb-1",children:"Pro Woche"}),(0,a.jsx)("p",{className:"text-sm font-bold text-dark-200",children:f(7*x)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xs text-dark-500 mb-1",children:"Pro Monat"}),(0,a.jsx)("p",{className:"text-sm font-bold text-dark-200",children:f(30*x)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xs text-dark-500 mb-1",children:"Pro Jahr"}),(0,a.jsx)("p",{className:"text-sm font-bold text-amber-400",children:f(365*x)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-xs text-dark-500 mb-1",children:"\xd8 pro Transaktion"}),(0,a.jsx)("p",{className:"text-sm font-bold text-dark-200",children:f(e.transactions.length>0?e.currentTotal/e.transactions.length:0)})]})]}),n.length>=2&&(0,a.jsxs)("div",{className:"p-5 border-t border-dark-700/30",children:[(0,a.jsxs)("h5",{className:"text-sm font-medium text-dark-300 mb-3 flex items-center gap-2",children:[(0,a.jsx)(eb.Z,{size:16}),"Trend \xfcber Zeit"]}),(0,a.jsx)(z.h,{width:"100%",height:160,children:(0,a.jsxs)(ef.w,{data:n,children:[(0,a.jsx)(eN.q,{strokeDasharray:"3 3",stroke:"#334155"}),(0,a.jsx)(Z.K,{dataKey:"label",tick:{fill:"#64748b",fontSize:11},axisLine:!1,tickLine:!1}),(0,a.jsx)(A.B,{tick:{fill:"#64748b",fontSize:11},axisLine:!1,tickLine:!1,tickFormatter:e=>"".concat((e/1).toFixed(0),"€")}),(0,a.jsx)(F.u,{content:(0,a.jsx)(K,{})}),(0,a.jsx)(ek.x,{type:"monotone",dataKey:"total",stroke:e.color,strokeWidth:2,dot:{fill:e.color,r:4}})]})})]}),(0,a.jsx)("div",{className:"divide-y divide-dark-700/20",children:l.map(t=>(t.amount,e.transactions.filter(e=>(e.recipient||e.description)===(t.recipient||t.description)).length,(0,a.jsxs)("div",{className:"flex items-center justify-between py-3 px-5 hover:bg-dark-700/20",children:[(0,a.jsx)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-dark-100 truncate max-w-[250px]",children:t.recipient||t.description||"Unbekannt"}),(0,a.jsxs)("p",{className:"text-xs text-dark-500",children:[new Date(t.date).toLocaleDateString("de-DE",{weekday:"short",day:"2-digit",month:"2-digit"}),t.description&&t.recipient&&(0,a.jsxs)("span",{className:"ml-2 text-dark-600",children:["\xb7 ",t.description.slice(0,40)]})]})]})}),(0,a.jsxs)("span",{className:"text-sm font-bold text-red-400 flex-shrink-0",children:["-",f(Number(t.amount))]})]},t.id)))})]})]},e.id)})}),0===T.length&&(0,a.jsxs)("div",{className:"glass rounded-2xl p-12 text-center",children:[(0,a.jsx)(ej.Z,{size:48,className:"mx-auto text-dark-500 mb-4"}),(0,a.jsx)("p",{className:"text-dark-400 text-lg",children:"Keine Ausgaben in diesem Zeitraum"}),(0,a.jsx)("p",{className:"text-dark-500 text-sm mt-1",children:"W\xe4hle einen anderen Zeitraum oder importiere Transaktionen"})]})]})}function ey(){let[e,t]=(0,r.useState)("dashboard");return(0,a.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[(0,a.jsx)(g,{activeTab:e,onTabChange:t}),(0,a.jsx)("main",{className:"lg:ml-64 pt-16 lg:pt-0",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8",children:function(){switch(e){case"dashboard":default:return(0,a.jsx)(I,{});case"transactions":return(0,a.jsx)(q,{});case"fixkosten":return(0,a.jsx)(eh,{});case"deepdive":return(0,a.jsx)(ev,{});case"import":return(0,a.jsx)($,{});case"categories":return(0,a.jsx)(et,{});case"budget":return(0,a.jsx)(er,{});case"savings":return(0,a.jsx)(el,{});case"salary":return(0,a.jsx)(ec,{})}}()})})]})}}},function(e){e.O(0,[134,971,69,744],function(){return e(e.s=36883)}),_N_E=e.O()}]);